import{h as X,j as q,k as J,m as K,n as U,o as W,p as Y}from"./chunk-HMZUJEDD.js";import{d as O}from"./chunk-JYRBUVI2.js";import{a as Q,b as R,c as G,d as C,f as V}from"./chunk-Y2SQCBIU.js";import{I as B,J as $,K as H}from"./chunk-DPOEUPYJ.js";import{Ab as T,Bb as k,Fb as A,Gb as y,Hb as M,Ib as g,Ra as o,Rb as E,Tb as n,Ub as f,Vb as j,W as D,Wb as L,Y as _,Zb as N,_ as v,ac as s,dc as z,eb as m,fb as P,gb as h,pa as w,rb as l,sb as p,ub as I,vb as S,wb as u,xb as d,yb as i,zb as F}from"./chunk-U2MXLZLO.js";var ot=["*"];var mt=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],st=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],lt=new _("MAT_CARD_CONFIG"),tt=(()=>{class t{appearance;constructor(){let a=v(lt,{optional:!0});this.appearance=a?.appearance||"raised"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(e,c){e&2&&E("mat-mdc-card-outlined",c.appearance==="outlined")("mdc-card--outlined",c.appearance==="outlined")("mat-mdc-card-filled",c.appearance==="filled")("mdc-card--filled",c.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:ot,decls:1,vars:0,template:function(e,c){e&1&&(M(),g(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return t})(),et=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=h({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var at=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=h({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})(),rt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=h({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return t})();var it=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:st,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(e,c){e&1&&(M(mt),g(0),T(1,"div",0),g(2,1),k(),g(3,2))},encapsulation:2,changeDetection:0})}return t})();var dt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=P({type:t});static \u0275inj=D({imports:[B]})}return t})();var gt=t=>["/product",t];function ft(t,r){if(t&1&&(d(0,"span",6),n(1),i()),t&2){let a=y();o(),f(a.originalText)}}function vt(t,r){if(t&1&&(d(0,"div",1)(1,"span",2),n(2,"Best deal:"),i(),d(3,"span",5),l(4,ft,2,1,"span",6),n(5),i()()),t&2){let a=r;o(4),p(a.originalText?4:-1),o(),j(" ",a.discountText," ")}}var x=class t{product=z.required();cheapestFull=s(()=>{let r=R(this.product());return r?`${C(r.price.price)} @ ${r.brand}`:"No price"});cheapestDiscounted=s(()=>{let r=G(this.product());if(!r)return null;let a=`${C(r.price.price)} @ ${r.brand}`,e=this.product().supermarkets.find(ct=>ct.brand===r.brand),c=e?Q(e):null,b=c?C(c.price):null;return{discountText:a,originalText:b}});supermarketCount=s(()=>this.product().supermarkets.length);static \u0275fac=function(a){return new(a||t)};static \u0275cmp=m({type:t,selectors:[["pw-product-card"]],inputs:{product:[1,"product"]},decls:15,vars:9,consts:[[1,"product-card",3,"routerLink"],[1,"price-row"],[1,"label"],[1,"price","full-price"],[1,"supermarket-count"],[1,"price","discounted-price"],[1,"original-price"]],template:function(a,e){if(a&1&&(d(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),n(3),i(),d(4,"mat-card-subtitle"),n(5),i()(),d(6,"mat-card-content")(7,"div",1)(8,"span",2),n(9,"Best price:"),i(),d(10,"span",3),n(11),i()(),l(12,vt,6,2,"div",1),d(13,"div",4),n(14),i()()()),a&2){let c;u("routerLink",N(7,gt,e.product().barcode)),o(3),f(e.product().name),o(2),f(e.product().barcode),o(6),f(e.cheapestFull()),o(),p((c=e.cheapestDiscounted())?12:-1,c),o(2),L(" ",e.supermarketCount()," supermarket",e.supermarketCount()===1?"":"s"," ")}},dependencies:[O,dt,tt,at,it,rt,et],styles:[".product-card[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:8px}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:4px 0}.label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--mat-sys-on-surface-variant)}.full-price[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-primary)}.discounted-price[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-error)}.original-price[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--mat-sys-on-surface-variant);font-weight:400;font-size:.85em;margin-right:4px}.supermarket-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--mat-sys-on-surface-variant);margin-top:8px}"]})};var ht=(t,r)=>r.barcode;function yt(t,r){t&1&&(d(0,"div",4)(1,"mat-icon"),n(2,"inventory_2"),i(),d(3,"p"),n(4,"No products yet. Start scanning!"),i()())}function Ct(t,r){if(t&1&&F(0,"pw-product-card",6),t&2){let a=r.$implicit;u("product",a)}}function xt(t,r){if(t&1&&(d(0,"div",5),I(1,Ct,1,1,"pw-product-card",6,ht),i()),t&2){let a=y();o(),S(a.filteredProducts())}}var nt=class t{storage=v(V);searchQuery=w("");filteredProducts=s(()=>{let r=this.searchQuery().toLowerCase(),a=this.storage.products();return r?a.filter(e=>e.name.toLowerCase().includes(r)||e.barcode.includes(r)):a});static \u0275fac=function(a){return new(a||t)};static \u0275cmp=m({type:t,selectors:[["pw-products-list"]],decls:9,vars:2,consts:[[1,"list-page","page-content"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Name or barcode...",3,"input","value"],[1,"empty-state"],[1,"products-grid"],[3,"product"]],template:function(a,e){a&1&&(d(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),n(3,"Search products"),i(),d(4,"mat-icon",2),n(5,"search"),i(),d(6,"input",3),A("input",function(b){return e.searchQuery.set(b.target.value)}),i()(),l(7,yt,5,0,"div",4)(8,xt,3,0,"div",5),i()),a&2&&(o(6),u("value",e.searchQuery()),o(),p(e.filteredProducts().length===0?7:8))},dependencies:[X,U,K,q,J,Y,W,H,$,x],styles:[".list-page[_ngcontent-%COMP%]{max-width:500px;margin:0 auto}.search-field[_ngcontent-%COMP%]{width:100%}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:48px 16px;color:var(--mat-sys-on-surface-variant)}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.products-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}"]})};export{nt as ProductsList};
