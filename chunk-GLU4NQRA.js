import{a as qr}from"./chunk-6MGYTM46.js";import"./chunk-SNEV3XM5.js";import"./chunk-HMZUJEDD.js";import{c as Pr}from"./chunk-JYRBUVI2.js";import{a as jr,b as Dr,c as Tr,l as Br,m as Nr}from"./chunk-DCY57EI2.js";import"./chunk-S6TQN5V4.js";import{a as Ur,b as Fr,d as Wr,e as Lr,f as Vr}from"./chunk-Y2SQCBIU.js";import{J as Ir,K as zr}from"./chunk-DPOEUPYJ.js";import{D as _r,Db as _n,Fb as rn,G as br,Gb as Se,Kb as kr,Lb as Yn,Mb as Kn,Ra as le,Rb as Jn,Tb as fe,Ub as bn,V as wr,Vb as wn,Z as Or,_ as yn,d as Qa,da as Je,e as $a,ea as en,eb as Sr,i as xr,la as Cr,pa as xn,rb as nn,sb as tn,ub as Mr,vb as Rr,wb as Ar,xb as ee,yb as ne,zb as Er}from"./chunk-U2MXLZLO.js";var Gr=Qa((zn,et)=>{"use strict";(function(c,y){typeof zn=="object"&&typeof et=="object"?et.exports=y():typeof define=="function"&&define.amd?define([],y):typeof zn=="object"?zn.Quagga=y():c.Quagga=y()})(window,function(){return(function(c){var y={};function i(l){if(y[l])return y[l].exports;var s=y[l]={i:l,l:!1,exports:{}};return c[l].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=c,i.c=y,i.d=function(l,s,h){i.o(l,s)||Object.defineProperty(l,s,{enumerable:!0,get:h})},i.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},i.t=function(l,s){if(1&s&&(l=i(l)),8&s||4&s&&typeof l=="object"&&l&&l.__esModule)return l;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:l}),2&s&&typeof l!="string")for(var v in l)i.d(h,v,function(x){return l[x]}.bind(null,v));return h},i.n=function(l){var s=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(s,"a",s),s},i.o=function(l,s){return Object.prototype.hasOwnProperty.call(l,s)},i.p="/",i(i.s=90)})([function(c,y,i){var l=i(68);c.exports=function(s,h,v){return(h=l(h))in s?Object.defineProperty(s,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):s[h]=v,s},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){function i(l){return c.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},c.exports.__esModule=!0,c.exports.default=c.exports,i(l)}c.exports=i,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i,l){if(!(i instanceof l))throw new TypeError("Cannot call a class as a function")},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(68);function s(h,v){for(var x=0;x<v.length;x++){var b=v[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,l(b.key),b)}}c.exports=function(h,v,x){return v&&s(h.prototype,v),x&&s(h,x),Object.defineProperty(h,"prototype",{writable:!1}),h},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(9).default,s=i(150);c.exports=function(h,v){if(v&&(l(v)=="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(h)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(38);c.exports=function(s,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(h&&h.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),h&&l(s,h)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(146)();c.exports=l;try{regeneratorRuntime=l}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=l:Function("r","regeneratorRuntime = r")(l)}},function(c,y){function i(l,s,h,v,x,b,M){try{var E=l[b](M),P=E.value}catch(j){return void h(j)}E.done?s(P):Promise.resolve(P).then(v,x)}c.exports=function(l){return function(){var s=this,h=arguments;return new Promise(function(v,x){var b=l.apply(s,h);function M(P){i(b,v,x,M,E,"next",P)}function E(P){i(b,v,x,M,E,"throw",P)}M(void 0)})}},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(46),s=typeof self=="object"&&self&&self.Object===Object&&self,h=l||s||Function("return this")();c.exports=h},function(c,y){function i(l){return c.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},c.exports.__esModule=!0,c.exports.default=c.exports,i(l)}c.exports=i,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i){var l=typeof i;return i!=null&&(l=="object"||l=="function")}},function(c,y){c.exports=function(i){return i!=null&&typeof i=="object"}},function(c,y){var i=Array.isArray;c.exports=i},function(c,y,i){var l=i(151);function s(){return c.exports=s=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(h,v,x){var b=l(h,v);if(b){var M=Object.getOwnPropertyDescriptor(b,v);return M.get?M.get.call(arguments.length<3?h:x):M.value}},c.exports.__esModule=!0,c.exports.default=c.exports,s.apply(null,arguments)}c.exports=s,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(102),s=i(108);c.exports=function(h,v){var x=s(h,v);return l(x)?x:void 0}},function(c,y,i){var l=i(91),s=i(134)(function(h,v,x){l(h,v,x)});c.exports=s},function(c,y,i){var l=i(152),s=i(153),h=i(66),v=i(154);c.exports=function(x){return l(x)||s(x)||h(x)||v()},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(19),s=i(104),h=i(105),v=l?l.toStringTag:void 0;c.exports=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":v&&v in Object(x)?s(x):h(x)}},function(c,y,i){var l=i(60),s=i(29);c.exports=function(h,v,x,b){var M=!x;x||(x={});for(var E=-1,P=v.length;++E<P;){var j=v[E],B=b?b(x[j],h[j],j,x,h):void 0;B===void 0&&(B=h[j]),M?s(x,j,B):l(x,j,B)}return x}},function(c,y,i){var l=i(8).Symbol;c.exports=l},function(c,y,i){var l=i(61),s=i(132),h=i(26);c.exports=function(v){return h(v)?l(v,!0):s(v)}},function(c,y,i){var l=i(92),s=i(93),h=i(94),v=i(95),x=i(96);function b(M){var E=-1,P=M==null?0:M.length;for(this.clear();++E<P;){var j=M[E];this.set(j[0],j[1])}}b.prototype.clear=l,b.prototype.delete=s,b.prototype.get=h,b.prototype.has=v,b.prototype.set=x,c.exports=b},function(c,y,i){var l=i(23);c.exports=function(s,h){for(var v=s.length;v--;)if(l(s[v][0],h))return v;return-1}},function(c,y){c.exports=function(i,l){return i===l||i!=i&&l!=l}},function(c,y,i){var l=i(14)(Object,"create");c.exports=l},function(c,y,i){var l=i(117);c.exports=function(s,h){var v=s.__data__;return l(h)?v[typeof h=="string"?"string":"hash"]:v.map}},function(c,y,i){var l=i(28),s=i(56);c.exports=function(h){return h!=null&&s(h.length)&&!l(h)}},function(c,y,i){var l=i(14)(i(8),"Map");c.exports=l},function(c,y,i){var l=i(17),s=i(10);c.exports=function(h){if(!s(h))return!1;var v=l(h);return v=="[object Function]"||v=="[object GeneratorFunction]"||v=="[object AsyncFunction]"||v=="[object Proxy]"}},function(c,y,i){var l=i(50);c.exports=function(s,h,v){h=="__proto__"&&l?l(s,h,{configurable:!0,enumerable:!0,value:v,writable:!0}):s[h]=v}},function(c,y){c.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(c,y,i){var l=i(124);c.exports=function(s){var h=new s.constructor(s.byteLength);return new l(h).set(new l(s)),h}},function(c,y,i){var l=i(55)(Object.getPrototypeOf,Object);c.exports=l},function(c,y){var i=Object.prototype;c.exports=function(l){var s=l&&l.constructor;return l===(typeof s=="function"&&s.prototype||i)}},function(c,y,i){var l=i(126),s=i(11),h=Object.prototype,v=h.hasOwnProperty,x=h.propertyIsEnumerable,b=l((function(){return arguments})())?l:function(M){return s(M)&&v.call(M,"callee")&&!x.call(M,"callee")};c.exports=b},function(c,y,i){(function(l){var s=i(8),h=i(128),v=y&&!y.nodeType&&y,x=v&&typeof l=="object"&&l&&!l.nodeType&&l,b=x&&x.exports===v?s.Buffer:void 0,M=(b?b.isBuffer:void 0)||h;l.exports=M}).call(this,i(30)(c))},function(c,y){c.exports=function(i){return function(l){return i(l)}}},function(c,y,i){(function(l){var s=i(46),h=y&&!y.nodeType&&y,v=h&&typeof l=="object"&&l&&!l.nodeType&&l,x=v&&v.exports===h&&s.process,b=(function(){try{var M=v&&v.require&&v.require("util").types;return M||x&&x.binding&&x.binding("util")}catch{}})();l.exports=b}).call(this,i(30)(c))},function(c,y){function i(l,s){return c.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,v){return h.__proto__=v,h},c.exports.__esModule=!0,c.exports.default=c.exports,i(l,s)}c.exports=i,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(61),s=i(159),h=i(26);c.exports=function(v){return h(v)?l(v):s(v)}},function(c,y,i){var l=i(163),s=i(75),h=Object.prototype.propertyIsEnumerable,v=Object.getOwnPropertySymbols,x=v?function(b){return b==null?[]:(b=Object(b),l(v(b),function(M){return h.call(b,M)}))}:s;c.exports=x},function(c,y){c.exports=function(i,l){for(var s=-1,h=l.length,v=i.length;++s<h;)i[v+s]=l[s];return i}},function(c,y,i){var l=i(166),s=i(27),h=i(167),v=i(168),x=i(169),b=i(17),M=i(47),E=M(l),P=M(s),j=M(h),B=M(v),I=M(x),G=b;(l&&G(new l(new ArrayBuffer(1)))!="[object DataView]"||s&&G(new s)!="[object Map]"||h&&G(h.resolve())!="[object Promise]"||v&&G(new v)!="[object Set]"||x&&G(new x)!="[object WeakMap]")&&(G=function(z){var Q=b(z),R=Q=="[object Object]"?z.constructor:void 0,F=R?M(R):"";if(F)switch(F){case E:return"[object DataView]";case P:return"[object Map]";case j:return"[object Promise]";case B:return"[object Set]";case I:return"[object WeakMap]"}return Q}),c.exports=G},function(c,y,i){var l=i(12),s=i(180),h=i(181),v=i(184);c.exports=function(x,b){return l(x)?x:s(x,b)?[x]:h(v(x))}},function(c,y,i){var l=i(17),s=i(11);c.exports=function(h){return typeof h=="symbol"||s(h)&&l(h)=="[object Symbol]"}},function(c,y,i){var l=i(21),s=i(97),h=i(98),v=i(99),x=i(100),b=i(101);function M(E){var P=this.__data__=new l(E);this.size=P.size}M.prototype.clear=s,M.prototype.delete=h,M.prototype.get=v,M.prototype.has=x,M.prototype.set=b,c.exports=M},function(c,y,i){(function(l){var s=typeof l=="object"&&l&&l.Object===Object&&l;c.exports=s}).call(this,i(103))},function(c,y){var i=Function.prototype.toString;c.exports=function(l){if(l!=null){try{return i.call(l)}catch{}try{return l+""}catch{}}return""}},function(c,y,i){var l=i(109),s=i(116),h=i(118),v=i(119),x=i(120);function b(M){var E=-1,P=M==null?0:M.length;for(this.clear();++E<P;){var j=M[E];this.set(j[0],j[1])}}b.prototype.clear=l,b.prototype.delete=s,b.prototype.get=h,b.prototype.has=v,b.prototype.set=x,c.exports=b},function(c,y,i){var l=i(29),s=i(23);c.exports=function(h,v,x){(x!==void 0&&!s(h[v],x)||x===void 0&&!(v in h))&&l(h,v,x)}},function(c,y,i){var l=i(14),s=(function(){try{var h=l(Object,"defineProperty");return h({},"",{}),h}catch{}})();c.exports=s},function(c,y,i){(function(l){var s=i(8),h=y&&!y.nodeType&&y,v=h&&typeof l=="object"&&l&&!l.nodeType&&l,x=v&&v.exports===h?s.Buffer:void 0,b=x?x.allocUnsafe:void 0;l.exports=function(M,E){if(E)return M.slice();var P=M.length,j=b?b(P):new M.constructor(P);return M.copy(j),j}}).call(this,i(30)(c))},function(c,y,i){var l=i(31);c.exports=function(s,h){var v=h?l(s.buffer):s.buffer;return new s.constructor(v,s.byteOffset,s.length)}},function(c,y){c.exports=function(i,l){var s=-1,h=i.length;for(l||(l=Array(h));++s<h;)l[s]=i[s];return l}},function(c,y,i){var l=i(125),s=i(32),h=i(33);c.exports=function(v){return typeof v.constructor!="function"||h(v)?{}:l(s(v))}},function(c,y){c.exports=function(i,l){return function(s){return i(l(s))}}},function(c,y){c.exports=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991}},function(c,y,i){var l=i(17),s=i(32),h=i(11),v=Function.prototype,x=Object.prototype,b=v.toString,M=x.hasOwnProperty,E=b.call(Object);c.exports=function(P){if(!h(P)||l(P)!="[object Object]")return!1;var j=s(P);if(j===null)return!0;var B=M.call(j,"constructor")&&j.constructor;return typeof B=="function"&&B instanceof B&&b.call(B)==E}},function(c,y,i){var l=i(129),s=i(36),h=i(37),v=h&&h.isTypedArray,x=v?s(v):l;c.exports=x},function(c,y){c.exports=function(i,l){if((l!=="constructor"||typeof i[l]!="function")&&l!="__proto__")return i[l]}},function(c,y,i){var l=i(29),s=i(23),h=Object.prototype.hasOwnProperty;c.exports=function(v,x,b){var M=v[x];h.call(v,x)&&s(M,b)&&(b!==void 0||x in v)||l(v,x,b)}},function(c,y,i){var l=i(131),s=i(34),h=i(12),v=i(35),x=i(62),b=i(58),M=Object.prototype.hasOwnProperty;c.exports=function(E,P){var j=h(E),B=!j&&s(E),I=!j&&!B&&v(E),G=!j&&!B&&!I&&b(E),z=j||B||I||G,Q=z?l(E.length,String):[],R=Q.length;for(var F in E)!P&&!M.call(E,F)||z&&(F=="length"||I&&(F=="offset"||F=="parent")||G&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||x(F,R))||Q.push(F);return Q}},function(c,y){var i=/^(?:0|[1-9]\d*)$/;c.exports=function(l,s){var h=typeof l;return!!(s=s??9007199254740991)&&(h=="number"||h!="symbol"&&i.test(l))&&l>-1&&l%1==0&&l<s}},function(c,y){c.exports=function(i){return i}},function(c,y,i){var l=i(136),s=Math.max;c.exports=function(h,v,x){return v=s(v===void 0?h.length-1:v,0),function(){for(var b=arguments,M=-1,E=s(b.length-v,0),P=Array(E);++M<E;)P[M]=b[v+M];M=-1;for(var j=Array(v+1);++M<v;)j[M]=b[M];return j[v]=x(P),l(h,this,j)}}},function(c,y,i){var l=i(137),s=i(139)(l);c.exports=s},function(c,y,i){var l=i(67);c.exports=function(s,h){if(s){if(typeof s=="string")return l(s,h);var v={}.toString.call(s).slice(8,-1);return v==="Object"&&s.constructor&&(v=s.constructor.name),v==="Map"||v==="Set"?Array.from(s):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?l(s,h):void 0}},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i,l){(l==null||l>i.length)&&(l=i.length);for(var s=0,h=Array(l);s<l;s++)h[s]=i[s];return h},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(9).default,s=i(145);c.exports=function(h){var v=s(h,"string");return l(v)=="symbol"?v:v+""},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i,l){this.v=i,this.k=l},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(71);function s(){var h,v,x=typeof Symbol=="function"?Symbol:{},b=x.iterator||"@@iterator",M=x.toStringTag||"@@toStringTag";function E(R,F,$,oe){var xe=F&&F.prototype instanceof j?F:j,me=Object.create(xe.prototype);return l(me,"_invoke",(function(Me,V,te){var W,L,Y,Ce=0,_e=te||[],ie=!1,K={p:0,n:0,v:h,a:Re,f:Re.bind(h,4),d:function(ue,de){return W=ue,L=0,Y=h,K.n=de,P}};function Re(ue,de){for(L=ue,Y=de,v=0;!ie&&Ce&&!be&&v<_e.length;v++){var be,re=_e[v],Fe=K.p,Ie=re[2];ue>3?(be=Ie===de)&&(Y=re[(L=re[4])?5:(L=3,3)],re[4]=re[5]=h):re[0]<=Fe&&((be=ue<2&&Fe<re[1])?(L=0,K.v=de,K.n=re[1]):Fe<Ie&&(be=ue<3||re[0]>de||de>Ie)&&(re[4]=ue,re[5]=de,K.n=Ie,L=0))}if(be||ue>1)return P;throw ie=!0,de}return function(ue,de,be){if(Ce>1)throw TypeError("Generator is already running");for(ie&&de===1&&Re(de,be),L=de,Y=be;(v=L<2?h:Y)||!ie;){W||(L?L<3?(L>1&&(K.n=-1),Re(L,Y)):K.n=Y:K.v=Y);try{if(Ce=2,W){if(L||(ue="next"),v=W[ue]){if(!(v=v.call(W,Y)))throw TypeError("iterator result is not an object");if(!v.done)return v;Y=v.value,L<2&&(L=0)}else L===1&&(v=W.return)&&v.call(W),L<2&&(Y=TypeError("The iterator does not provide a '"+ue+"' method"),L=1);W=h}else if((v=(ie=K.n<0)?Y:Me.call(V,K))!==P)break}catch(re){W=h,L=1,Y=re}finally{Ce=1}}return{value:v,done:ie}}})(R,$,oe),!0),me}var P={};function j(){}function B(){}function I(){}v=Object.getPrototypeOf;var G=[][b]?v(v([][b]())):(l(v={},b,function(){return this}),v),z=I.prototype=j.prototype=Object.create(G);function Q(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,I):(R.__proto__=I,l(R,M,"GeneratorFunction")),R.prototype=Object.create(z),R}return B.prototype=I,l(z,"constructor",I),l(I,"constructor",B),B.displayName="GeneratorFunction",l(I,M,"GeneratorFunction"),l(z),l(z,M,"Generator"),l(z,b,function(){return this}),l(z,"toString",function(){return"[object Generator]"}),(c.exports=s=function(){return{w:E,m:Q}},c.exports.__esModule=!0,c.exports.default=c.exports)()}c.exports=s,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){function i(l,s,h,v){var x=Object.defineProperty;try{x({},"",{})}catch{x=0}c.exports=i=function(b,M,E,P){function j(B,I){i(b,B,function(G){return this._invoke(B,I,G)})}M?x?x(b,M,{value:E,enumerable:!P,configurable:!P,writable:!P}):b[M]=E:(j("next",0),j("throw",1),j("return",2))},c.exports.__esModule=!0,c.exports.default=c.exports,i(l,s,h,v)}c.exports=i,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(70),s=i(73);c.exports=function(h,v,x,b,M){return new s(l().w(h,v,x,b),M||Promise)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(69),s=i(71);c.exports=function h(v,x){function b(E,P,j,B){try{var I=v[E](P),G=I.value;return G instanceof l?x.resolve(G.v).then(function(z){b("next",z,j,B)},function(z){b("throw",z,j,B)}):x.resolve(G).then(function(z){I.value=z,j(I)},function(z){return b("throw",z,j,B)})}catch(z){B(z)}}var M;this.next||(s(h.prototype),s(h.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),s(this,"_invoke",function(E,P,j){function B(){return new x(function(I,G){b(E,j,I,G)})}return M=M?M.then(B,B):B()},!0)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i,l){for(var s=-1,h=i==null?0:i.length,v=Array(h);++s<h;)v[s]=l(i[s],s,i);return v}},function(c,y){c.exports=function(){return[]}},function(c,y,i){var l=i(41),s=i(32),h=i(40),v=i(75),x=Object.getOwnPropertySymbols?function(b){for(var M=[];b;)l(M,h(b)),b=s(b);return M}:v;c.exports=x},function(c,y,i){var l=i(41),s=i(12);c.exports=function(h,v,x){var b=v(h);return s(h)?b:l(b,x(h))}},function(c,y,i){var l=i(77),s=i(76),h=i(20);c.exports=function(v){return l(v,h,s)}},function(c,y,i){var l=i(44);c.exports=function(s){if(typeof s=="string"||l(s))return s;var h=s+"";return h=="0"&&1/s==-1/0?"-0":h}},function(c,y,i){var l=i(142),s=i(143),h=i(66),v=i(144);c.exports=function(x,b){return l(x)||s(x,b)||h(x,b)||v()},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(155);c.exports=function(s,h){if(s==null)return{};var v,x,b=l(s,h);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(s);for(x=0;x<M.length;x++)v=M[x],h.indexOf(v)===-1&&{}.propertyIsEnumerable.call(s,v)&&(b[v]=s[v])}return b},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(74),s=i(156),h=i(179),v=i(43),x=i(18),b=i(190),M=i(191),E=i(78),P=M(function(j,B){var I={};if(j==null)return I;var G=!1;B=l(B,function(Q){return Q=v(Q,j),G||(G=Q.length>1),Q}),x(j,E(j),I),G&&(I=s(I,7,b));for(var z=B.length;z--;)h(I,B[z]);return I});c.exports=P},function(c,y,i){var l=i(1),s=i(38),h=i(195),v=i(196);function x(b){var M=typeof Map=="function"?new Map:void 0;return c.exports=x=function(E){if(E===null||!h(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(M!==void 0){if(M.has(E))return M.get(E);M.set(E,P)}function P(){return v(E,arguments,l(this).constructor)}return P.prototype=Object.create(E.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),s(P,E)},c.exports.__esModule=!0,c.exports.default=c.exports,x(b)}c.exports=x,c.exports.__esModule=!0,c.exports.default=c.exports},,,,,,,function(c,y,i){c.exports=i(198)},function(c,y,i){var l=i(45),s=i(49),h=i(121),v=i(123),x=i(10),b=i(20),M=i(59);c.exports=function E(P,j,B,I,G){P!==j&&h(j,function(z,Q){if(G||(G=new l),x(z))v(P,j,Q,B,E,I,G);else{var R=I?I(M(P,Q),z,Q+"",P,j,G):void 0;R===void 0&&(R=z),s(P,Q,R)}},b)}},function(c,y){c.exports=function(){this.__data__=[],this.size=0}},function(c,y,i){var l=i(22),s=Array.prototype.splice;c.exports=function(h){var v=this.__data__,x=l(v,h);return!(x<0)&&(x==v.length-1?v.pop():s.call(v,x,1),--this.size,!0)}},function(c,y,i){var l=i(22);c.exports=function(s){var h=this.__data__,v=l(h,s);return v<0?void 0:h[v][1]}},function(c,y,i){var l=i(22);c.exports=function(s){return l(this.__data__,s)>-1}},function(c,y,i){var l=i(22);c.exports=function(s,h){var v=this.__data__,x=l(v,s);return x<0?(++this.size,v.push([s,h])):v[x][1]=h,this}},function(c,y,i){var l=i(21);c.exports=function(){this.__data__=new l,this.size=0}},function(c,y){c.exports=function(i){var l=this.__data__,s=l.delete(i);return this.size=l.size,s}},function(c,y){c.exports=function(i){return this.__data__.get(i)}},function(c,y){c.exports=function(i){return this.__data__.has(i)}},function(c,y,i){var l=i(21),s=i(27),h=i(48);c.exports=function(v,x){var b=this.__data__;if(b instanceof l){var M=b.__data__;if(!s||M.length<199)return M.push([v,x]),this.size=++b.size,this;b=this.__data__=new h(M)}return b.set(v,x),this.size=b.size,this}},function(c,y,i){var l=i(28),s=i(106),h=i(10),v=i(47),x=/^\[object .+?Constructor\]$/,b=Function.prototype,M=Object.prototype,E=b.toString,P=M.hasOwnProperty,j=RegExp("^"+E.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");c.exports=function(B){return!(!h(B)||s(B))&&(l(B)?j:x).test(v(B))}},function(c,y){var i;i=(function(){return this})();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}c.exports=i},function(c,y,i){var l=i(19),s=Object.prototype,h=s.hasOwnProperty,v=s.toString,x=l?l.toStringTag:void 0;c.exports=function(b){var M=h.call(b,x),E=b[x];try{b[x]=void 0;var P=!0}catch{}var j=v.call(b);return P&&(M?b[x]=E:delete b[x]),j}},function(c,y){var i=Object.prototype.toString;c.exports=function(l){return i.call(l)}},function(c,y,i){var l,s=i(107),h=(l=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";c.exports=function(v){return!!h&&h in v}},function(c,y,i){var l=i(8)["__core-js_shared__"];c.exports=l},function(c,y){c.exports=function(i,l){return i?.[l]}},function(c,y,i){var l=i(110),s=i(21),h=i(27);c.exports=function(){this.size=0,this.__data__={hash:new l,map:new(h||s),string:new l}}},function(c,y,i){var l=i(111),s=i(112),h=i(113),v=i(114),x=i(115);function b(M){var E=-1,P=M==null?0:M.length;for(this.clear();++E<P;){var j=M[E];this.set(j[0],j[1])}}b.prototype.clear=l,b.prototype.delete=s,b.prototype.get=h,b.prototype.has=v,b.prototype.set=x,c.exports=b},function(c,y,i){var l=i(24);c.exports=function(){this.__data__=l?l(null):{},this.size=0}},function(c,y){c.exports=function(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l}},function(c,y,i){var l=i(24),s=Object.prototype.hasOwnProperty;c.exports=function(h){var v=this.__data__;if(l){var x=v[h];return x==="__lodash_hash_undefined__"?void 0:x}return s.call(v,h)?v[h]:void 0}},function(c,y,i){var l=i(24),s=Object.prototype.hasOwnProperty;c.exports=function(h){var v=this.__data__;return l?v[h]!==void 0:s.call(v,h)}},function(c,y,i){var l=i(24);c.exports=function(s,h){var v=this.__data__;return this.size+=this.has(s)?0:1,v[s]=l&&h===void 0?"__lodash_hash_undefined__":h,this}},function(c,y,i){var l=i(25);c.exports=function(s){var h=l(this,s).delete(s);return this.size-=h?1:0,h}},function(c,y){c.exports=function(i){var l=typeof i;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?i!=="__proto__":i===null}},function(c,y,i){var l=i(25);c.exports=function(s){return l(this,s).get(s)}},function(c,y,i){var l=i(25);c.exports=function(s){return l(this,s).has(s)}},function(c,y,i){var l=i(25);c.exports=function(s,h){var v=l(this,s),x=v.size;return v.set(s,h),this.size+=v.size==x?0:1,this}},function(c,y,i){var l=i(122)();c.exports=l},function(c,y){c.exports=function(i){return function(l,s,h){for(var v=-1,x=Object(l),b=h(l),M=b.length;M--;){var E=b[i?M:++v];if(s(x[E],E,x)===!1)break}return l}}},function(c,y,i){var l=i(49),s=i(51),h=i(52),v=i(53),x=i(54),b=i(34),M=i(12),E=i(127),P=i(35),j=i(28),B=i(10),I=i(57),G=i(58),z=i(59),Q=i(130);c.exports=function(R,F,$,oe,xe,me,Me){var V=z(R,$),te=z(F,$),W=Me.get(te);if(W)l(R,$,W);else{var L=me?me(V,te,$+"",R,F,Me):void 0,Y=L===void 0;if(Y){var Ce=M(te),_e=!Ce&&P(te),ie=!Ce&&!_e&&G(te);L=te,Ce||_e||ie?M(V)?L=V:E(V)?L=v(V):_e?(Y=!1,L=s(te,!0)):ie?(Y=!1,L=h(te,!0)):L=[]:I(te)||b(te)?(L=V,b(V)?L=Q(V):B(V)&&!j(V)||(L=x(te))):Y=!1}Y&&(Me.set(te,L),xe(L,te,oe,me,Me),Me.delete(te)),l(R,$,L)}}},function(c,y,i){var l=i(8).Uint8Array;c.exports=l},function(c,y,i){var l=i(10),s=Object.create,h=(function(){function v(){}return function(x){if(!l(x))return{};if(s)return s(x);v.prototype=x;var b=new v;return v.prototype=void 0,b}})();c.exports=h},function(c,y,i){var l=i(17),s=i(11);c.exports=function(h){return s(h)&&l(h)=="[object Arguments]"}},function(c,y,i){var l=i(26),s=i(11);c.exports=function(h){return s(h)&&l(h)}},function(c,y){c.exports=function(){return!1}},function(c,y,i){var l=i(17),s=i(56),h=i(11),v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v["[object Arguments]"]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v["[object Function]"]=v["[object Map]"]=v["[object Number]"]=v["[object Object]"]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1,c.exports=function(x){return h(x)&&s(x.length)&&!!v[l(x)]}},function(c,y,i){var l=i(18),s=i(20);c.exports=function(h){return l(h,s(h))}},function(c,y){c.exports=function(i,l){for(var s=-1,h=Array(i);++s<i;)h[s]=l(s);return h}},function(c,y,i){var l=i(10),s=i(33),h=i(133),v=Object.prototype.hasOwnProperty;c.exports=function(x){if(!l(x))return h(x);var b=s(x),M=[];for(var E in x)(E!="constructor"||!b&&v.call(x,E))&&M.push(E);return M}},function(c,y){c.exports=function(i){var l=[];if(i!=null)for(var s in Object(i))l.push(s);return l}},function(c,y,i){var l=i(135),s=i(140);c.exports=function(h){return l(function(v,x){var b=-1,M=x.length,E=M>1?x[M-1]:void 0,P=M>2?x[2]:void 0;for(E=h.length>3&&typeof E=="function"?(M--,E):void 0,P&&s(x[0],x[1],P)&&(E=M<3?void 0:E,M=1),v=Object(v);++b<M;){var j=x[b];j&&h(v,j,b,E)}return v})}},function(c,y,i){var l=i(63),s=i(64),h=i(65);c.exports=function(v,x){return h(s(v,x,l),v+"")}},function(c,y){c.exports=function(i,l,s){switch(s.length){case 0:return i.call(l);case 1:return i.call(l,s[0]);case 2:return i.call(l,s[0],s[1]);case 3:return i.call(l,s[0],s[1],s[2])}return i.apply(l,s)}},function(c,y,i){var l=i(138),s=i(50),h=i(63),v=s?function(x,b){return s(x,"toString",{configurable:!0,enumerable:!1,value:l(b),writable:!0})}:h;c.exports=v},function(c,y){c.exports=function(i){return function(){return i}}},function(c,y){var i=Date.now;c.exports=function(l){var s=0,h=0;return function(){var v=i(),x=16-(v-h);if(h=v,x>0){if(++s>=800)return arguments[0]}else s=0;return l.apply(void 0,arguments)}}},function(c,y,i){var l=i(23),s=i(26),h=i(62),v=i(10);c.exports=function(x,b,M){if(!v(M))return!1;var E=typeof b;return!!(E=="number"?s(M)&&h(b,M.length):E=="string"&&b in M)&&l(M[b],x)}},function(c,y){typeof window<"u"&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)})),typeof Math.imul!="function"&&(Math.imul=function(i,l){var s=65535&i,h=65535&l;return s*h+((i>>>16&65535)*h+s*(l>>>16&65535)<<16>>>0)|0}),typeof Object.assign!="function"&&(Object.assign=function(i){"use strict";if(i===null)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(i),s=1;s<arguments.length;s++){var h=arguments[s];if(h!==null)for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(l[v]=h[v])}return l})},function(c,y){c.exports=function(i){if(Array.isArray(i))return i},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i,l){var s=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(s!=null){var h,v,x,b,M=[],E=!0,P=!1;try{if(x=(s=s.call(i)).next,l===0){if(Object(s)!==s)return;E=!1}else for(;!(E=(h=x.call(s)).done)&&(M.push(h.value),M.length!==l);E=!0);}catch(j){P=!0,v=j}finally{try{if(!E&&s.return!=null&&(b=s.return(),Object(b)!==b))return}finally{if(P)throw v}}return M}},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(9).default;c.exports=function(s,h){if(l(s)!="object"||!s)return s;var v=s[Symbol.toPrimitive];if(v!==void 0){var x=v.call(s,h||"default");if(l(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(s)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(69),s=i(70),h=i(147),v=i(72),x=i(73),b=i(148),M=i(149);function E(){"use strict";var P=s(),j=P.m(E),B=(Object.getPrototypeOf?Object.getPrototypeOf(j):j.__proto__).constructor;function I(Q){var R=typeof Q=="function"&&Q.constructor;return!!R&&(R===B||(R.displayName||R.name)==="GeneratorFunction")}var G={throw:1,return:2,break:3,continue:3};function z(Q){var R,F;return function($){R||(R={stop:function(){return F($.a,2)},catch:function(){return $.v},abrupt:function(oe,xe){return F($.a,G[oe],xe)},delegateYield:function(oe,xe,me){return R.resultName=xe,F($.d,M(oe),me)},finish:function(oe){return F($.f,oe)}},F=function(oe,xe,me){$.p=R.prev,$.n=R.next;try{return oe(xe,me)}finally{R.next=$.n}}),R.resultName&&(R[R.resultName]=$.v,R.resultName=void 0),R.sent=$.v,R.next=$.n;try{return Q.call(this,R)}finally{$.p=R.prev,$.n=R.next}}}return(c.exports=E=function(){return{wrap:function(Q,R,F,$){return P.w(z(Q),R,F,$&&$.reverse())},isGeneratorFunction:I,mark:P.m,awrap:function(Q,R){return new l(Q,R)},AsyncIterator:x,async:function(Q,R,F,$,oe){return(I(R)?v:h)(z(Q),R,F,$,oe)},keys:b,values:M}},c.exports.__esModule=!0,c.exports.default=c.exports)()}c.exports=E,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(72);c.exports=function(s,h,v,x,b){var M=l(s,h,v,x,b);return M.next().then(function(E){return E.done?E.value:M.next()})},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i){var l=Object(i),s=[];for(var h in l)s.unshift(h);return function v(){for(;s.length;)if((h=s.pop())in l)return v.value=h,v.done=!1,v;return v.done=!0,v}},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(9).default;c.exports=function(s){if(s!=null){var h=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],v=0;if(h)return h.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&v>=s.length&&(s=void 0),{value:s&&s[v++],done:!s}}}}throw new TypeError(l(s)+" is not iterable")},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(1);c.exports=function(s,h){for(;!{}.hasOwnProperty.call(s,h)&&(s=l(s))!==null;);return s},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(67);c.exports=function(s){if(Array.isArray(s))return l(s)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){c.exports=function(i,l){if(i==null)return{};var s={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(l.indexOf(h)!==-1)continue;s[h]=i[h]}return s},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(45),s=i(157),h=i(60),v=i(158),x=i(161),b=i(51),M=i(53),E=i(162),P=i(164),j=i(165),B=i(78),I=i(42),G=i(170),z=i(171),Q=i(54),R=i(12),F=i(35),$=i(175),oe=i(10),xe=i(177),me=i(39),Me=i(20),V={};V["[object Arguments]"]=V["[object Array]"]=V["[object ArrayBuffer]"]=V["[object DataView]"]=V["[object Boolean]"]=V["[object Date]"]=V["[object Float32Array]"]=V["[object Float64Array]"]=V["[object Int8Array]"]=V["[object Int16Array]"]=V["[object Int32Array]"]=V["[object Map]"]=V["[object Number]"]=V["[object Object]"]=V["[object RegExp]"]=V["[object Set]"]=V["[object String]"]=V["[object Symbol]"]=V["[object Uint8Array]"]=V["[object Uint8ClampedArray]"]=V["[object Uint16Array]"]=V["[object Uint32Array]"]=!0,V["[object Error]"]=V["[object Function]"]=V["[object WeakMap]"]=!1,c.exports=function te(W,L,Y,Ce,_e,ie){var K,Re=1&L,ue=2&L,de=4&L;if(Y&&(K=_e?Y(W,Ce,_e,ie):Y(W)),K!==void 0)return K;if(!oe(W))return W;var be=R(W);if(be){if(K=G(W),!Re)return M(W,K)}else{var re=I(W),Fe=re=="[object Function]"||re=="[object GeneratorFunction]";if(F(W))return b(W,Re);if(re=="[object Object]"||re=="[object Arguments]"||Fe&&!_e){if(K=ue||Fe?{}:Q(W),!Re)return ue?P(W,x(K,W)):E(W,v(K,W))}else{if(!V[re])return _e?W:{};K=z(W,re,Re)}}ie||(ie=new l);var Ie=ie.get(W);if(Ie)return Ie;ie.set(W,K),xe(W)?W.forEach(function(ke){K.add(te(ke,L,Y,ke,W,ie))}):$(W)&&W.forEach(function(ke,We){K.set(We,te(ke,L,Y,We,W,ie))});var dn=be?void 0:(de?ue?B:j:ue?Me:me)(W);return s(dn||W,function(ke,We){dn&&(ke=W[We=ke]),h(K,We,te(ke,L,Y,We,W,ie))}),K}},function(c,y){c.exports=function(i,l){for(var s=-1,h=i==null?0:i.length;++s<h&&l(i[s],s,i)!==!1;);return i}},function(c,y,i){var l=i(18),s=i(39);c.exports=function(h,v){return h&&l(v,s(v),h)}},function(c,y,i){var l=i(33),s=i(160),h=Object.prototype.hasOwnProperty;c.exports=function(v){if(!l(v))return s(v);var x=[];for(var b in Object(v))h.call(v,b)&&b!="constructor"&&x.push(b);return x}},function(c,y,i){var l=i(55)(Object.keys,Object);c.exports=l},function(c,y,i){var l=i(18),s=i(20);c.exports=function(h,v){return h&&l(v,s(v),h)}},function(c,y,i){var l=i(18),s=i(40);c.exports=function(h,v){return l(h,s(h),v)}},function(c,y){c.exports=function(i,l){for(var s=-1,h=i==null?0:i.length,v=0,x=[];++s<h;){var b=i[s];l(b,s,i)&&(x[v++]=b)}return x}},function(c,y,i){var l=i(18),s=i(76);c.exports=function(h,v){return l(h,s(h),v)}},function(c,y,i){var l=i(77),s=i(40),h=i(39);c.exports=function(v){return l(v,h,s)}},function(c,y,i){var l=i(14)(i(8),"DataView");c.exports=l},function(c,y,i){var l=i(14)(i(8),"Promise");c.exports=l},function(c,y,i){var l=i(14)(i(8),"Set");c.exports=l},function(c,y,i){var l=i(14)(i(8),"WeakMap");c.exports=l},function(c,y){var i=Object.prototype.hasOwnProperty;c.exports=function(l){var s=l.length,h=new l.constructor(s);return s&&typeof l[0]=="string"&&i.call(l,"index")&&(h.index=l.index,h.input=l.input),h}},function(c,y,i){var l=i(31),s=i(172),h=i(173),v=i(174),x=i(52);c.exports=function(b,M,E){var P=b.constructor;switch(M){case"[object ArrayBuffer]":return l(b);case"[object Boolean]":case"[object Date]":return new P(+b);case"[object DataView]":return s(b,E);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(b,E);case"[object Map]":return new P;case"[object Number]":case"[object String]":return new P(b);case"[object RegExp]":return h(b);case"[object Set]":return new P;case"[object Symbol]":return v(b)}}},function(c,y,i){var l=i(31);c.exports=function(s,h){var v=h?l(s.buffer):s.buffer;return new s.constructor(v,s.byteOffset,s.byteLength)}},function(c,y){var i=/\w*$/;c.exports=function(l){var s=new l.constructor(l.source,i.exec(l));return s.lastIndex=l.lastIndex,s}},function(c,y,i){var l=i(19),s=l?l.prototype:void 0,h=s?s.valueOf:void 0;c.exports=function(v){return h?Object(h.call(v)):{}}},function(c,y,i){var l=i(176),s=i(36),h=i(37),v=h&&h.isMap,x=v?s(v):l;c.exports=x},function(c,y,i){var l=i(42),s=i(11);c.exports=function(h){return s(h)&&l(h)=="[object Map]"}},function(c,y,i){var l=i(178),s=i(36),h=i(37),v=h&&h.isSet,x=v?s(v):l;c.exports=x},function(c,y,i){var l=i(42),s=i(11);c.exports=function(h){return s(h)&&l(h)=="[object Set]"}},function(c,y,i){var l=i(43),s=i(186),h=i(187),v=i(79);c.exports=function(x,b){return b=l(b,x),(x=h(x,b))==null||delete x[v(s(b))]}},function(c,y,i){var l=i(12),s=i(44),h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v=/^\w*$/;c.exports=function(x,b){if(l(x))return!1;var M=typeof x;return!(M!="number"&&M!="symbol"&&M!="boolean"&&x!=null&&!s(x))||v.test(x)||!h.test(x)||b!=null&&x in Object(b)}},function(c,y,i){var l=i(182),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,v=l(function(x){var b=[];return x.charCodeAt(0)===46&&b.push(""),x.replace(s,function(M,E,P,j){b.push(P?j.replace(h,"$1"):E||M)}),b});c.exports=v},function(c,y,i){var l=i(183);c.exports=function(s){var h=l(s,function(x){return v.size===500&&v.clear(),x}),v=h.cache;return h}},function(c,y,i){var l=i(48);function s(h,v){if(typeof h!="function"||v!=null&&typeof v!="function")throw new TypeError("Expected a function");var x=function(){var b=arguments,M=v?v.apply(this,b):b[0],E=x.cache;if(E.has(M))return E.get(M);var P=h.apply(this,b);return x.cache=E.set(M,P)||E,P};return x.cache=new(s.Cache||l),x}s.Cache=l,c.exports=s},function(c,y,i){var l=i(185);c.exports=function(s){return s==null?"":l(s)}},function(c,y,i){var l=i(19),s=i(74),h=i(12),v=i(44),x=l?l.prototype:void 0,b=x?x.toString:void 0;c.exports=function M(E){if(typeof E=="string")return E;if(h(E))return s(E,M)+"";if(v(E))return b?b.call(E):"";var P=E+"";return P=="0"&&1/E==-1/0?"-0":P}},function(c,y){c.exports=function(i){var l=i==null?0:i.length;return l?i[l-1]:void 0}},function(c,y,i){var l=i(188),s=i(189);c.exports=function(h,v){return v.length<2?h:l(h,s(v,0,-1))}},function(c,y,i){var l=i(43),s=i(79);c.exports=function(h,v){for(var x=0,b=(v=l(v,h)).length;h!=null&&x<b;)h=h[s(v[x++])];return x&&x==b?h:void 0}},function(c,y){c.exports=function(i,l,s){var h=-1,v=i.length;l<0&&(l=-l>v?0:v+l),(s=s>v?v:s)<0&&(s+=v),v=l>s?0:s-l>>>0,l>>>=0;for(var x=Array(v);++h<v;)x[h]=i[h+l];return x}},function(c,y,i){var l=i(57);c.exports=function(s){return l(s)?void 0:s}},function(c,y,i){var l=i(192),s=i(64),h=i(65);c.exports=function(v){return h(s(v,void 0,l),v+"")}},function(c,y,i){var l=i(193);c.exports=function(s){return s!=null&&s.length?l(s,1):[]}},function(c,y,i){var l=i(41),s=i(194);c.exports=function h(v,x,b,M,E){var P=-1,j=v.length;for(b||(b=s),E||(E=[]);++P<j;){var B=v[P];x>0&&b(B)?x>1?h(B,x-1,b,M,E):l(E,B):M||(E[E.length]=B)}return E}},function(c,y,i){var l=i(19),s=i(34),h=i(12),v=l?l.isConcatSpreadable:void 0;c.exports=function(x){return h(x)||s(x)||!!(v&&x&&x[v])}},function(c,y){c.exports=function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){var l=i(197),s=i(38);c.exports=function(h,v,x){if(l())return Reflect.construct.apply(null,arguments);var b=[null];b.push.apply(b,v);var M=new(h.bind.apply(h,b));return x&&s(M,x.prototype),M},c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y){function i(){try{var l=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c.exports=i=function(){return!!l},c.exports.__esModule=!0,c.exports.default=c.exports)()}c.exports=i,c.exports.__esModule=!0,c.exports.default=c.exports},function(c,y,i){"use strict";i.r(y),i.d(y,"BarcodeDecoder",function(){return Qn}),i.d(y,"Readers",function(){return v}),i.d(y,"CameraAccess",function(){return Pn}),i.d(y,"ImageDebug",function(){return Ln}),i.d(y,"ImageWrapper",function(){return Ae}),i.d(y,"ResultCollector",function(){return tr});var l={};i.r(l),i.d(l,"create",function(){return xe}),i.d(l,"clone",function(){return me}),i.d(l,"copy",function(){return Me}),i.d(l,"identity",function(){return V}),i.d(l,"fromValues",function(){return te}),i.d(l,"set",function(){return W}),i.d(l,"transpose",function(){return L}),i.d(l,"invert",function(){return Y}),i.d(l,"adjoint",function(){return Ce}),i.d(l,"determinant",function(){return _e}),i.d(l,"multiply",function(){return ie}),i.d(l,"rotate",function(){return K}),i.d(l,"scale",function(){return Re}),i.d(l,"fromRotation",function(){return ue}),i.d(l,"fromScaling",function(){return de}),i.d(l,"str",function(){return be}),i.d(l,"frob",function(){return re}),i.d(l,"LDU",function(){return Fe}),i.d(l,"add",function(){return Ie}),i.d(l,"subtract",function(){return dn}),i.d(l,"exactEquals",function(){return ke}),i.d(l,"equals",function(){return We}),i.d(l,"multiplyScalar",function(){return Xr}),i.d(l,"multiplyScalarAndAdd",function(){return Qr}),i.d(l,"mul",function(){return $r}),i.d(l,"sub",function(){return Zr});var s={};i.r(s),i.d(s,"create",function(){return nt}),i.d(s,"clone",function(){return Yr}),i.d(s,"fromValues",function(){return Kr}),i.d(s,"copy",function(){return Jr}),i.d(s,"set",function(){return eo}),i.d(s,"add",function(){return no}),i.d(s,"subtract",function(){return tt}),i.d(s,"multiply",function(){return rt}),i.d(s,"divide",function(){return ot}),i.d(s,"ceil",function(){return to}),i.d(s,"floor",function(){return ro}),i.d(s,"min",function(){return oo}),i.d(s,"max",function(){return io}),i.d(s,"round",function(){return ao}),i.d(s,"scale",function(){return uo}),i.d(s,"scaleAndAdd",function(){return co}),i.d(s,"distance",function(){return it}),i.d(s,"squaredDistance",function(){return at}),i.d(s,"length",function(){return ut}),i.d(s,"squaredLength",function(){return ct}),i.d(s,"negate",function(){return so}),i.d(s,"inverse",function(){return lo}),i.d(s,"normalize",function(){return fo}),i.d(s,"dot",function(){return ho}),i.d(s,"cross",function(){return po}),i.d(s,"lerp",function(){return vo}),i.d(s,"random",function(){return go}),i.d(s,"transformMat2",function(){return mo}),i.d(s,"transformMat2d",function(){return yo}),i.d(s,"transformMat3",function(){return xo}),i.d(s,"transformMat4",function(){return _o}),i.d(s,"rotate",function(){return bo}),i.d(s,"angle",function(){return wo}),i.d(s,"signedAngle",function(){return Oo}),i.d(s,"zero",function(){return Co}),i.d(s,"str",function(){return So}),i.d(s,"exactEquals",function(){return Mo}),i.d(s,"equals",function(){return Ro}),i.d(s,"len",function(){return Ao}),i.d(s,"sub",function(){return Eo}),i.d(s,"mul",function(){return ko}),i.d(s,"div",function(){return Po}),i.d(s,"dist",function(){return jo}),i.d(s,"sqrDist",function(){return Do}),i.d(s,"sqrLen",function(){return To}),i.d(s,"forEach",function(){return Io});var h={};i.r(h),i.d(h,"create",function(){return st}),i.d(h,"clone",function(){return zo}),i.d(h,"length",function(){return lt}),i.d(h,"fromValues",function(){return Bo}),i.d(h,"copy",function(){return No}),i.d(h,"set",function(){return Uo}),i.d(h,"add",function(){return Fo}),i.d(h,"subtract",function(){return ft}),i.d(h,"multiply",function(){return dt}),i.d(h,"divide",function(){return ht}),i.d(h,"ceil",function(){return Wo}),i.d(h,"floor",function(){return Lo}),i.d(h,"min",function(){return Vo}),i.d(h,"max",function(){return qo}),i.d(h,"round",function(){return Go}),i.d(h,"scale",function(){return Ho}),i.d(h,"scaleAndAdd",function(){return Xo}),i.d(h,"distance",function(){return pt}),i.d(h,"squaredDistance",function(){return vt}),i.d(h,"squaredLength",function(){return gt}),i.d(h,"negate",function(){return Qo}),i.d(h,"inverse",function(){return $o}),i.d(h,"normalize",function(){return Zo}),i.d(h,"dot",function(){return Nn}),i.d(h,"cross",function(){return Yo}),i.d(h,"lerp",function(){return Ko}),i.d(h,"slerp",function(){return Jo}),i.d(h,"hermite",function(){return ei}),i.d(h,"bezier",function(){return ni}),i.d(h,"random",function(){return ti}),i.d(h,"transformMat4",function(){return ri}),i.d(h,"transformMat3",function(){return oi}),i.d(h,"transformQuat",function(){return ii}),i.d(h,"rotateX",function(){return ai}),i.d(h,"rotateY",function(){return ui}),i.d(h,"rotateZ",function(){return ci}),i.d(h,"angle",function(){return si}),i.d(h,"zero",function(){return li}),i.d(h,"str",function(){return fi}),i.d(h,"exactEquals",function(){return di}),i.d(h,"equals",function(){return hi}),i.d(h,"sub",function(){return pi}),i.d(h,"mul",function(){return vi}),i.d(h,"div",function(){return gi}),i.d(h,"dist",function(){return mi}),i.d(h,"sqrDist",function(){return yi}),i.d(h,"len",function(){return xi}),i.d(h,"sqrLen",function(){return _i}),i.d(h,"forEach",function(){return bi});var v={};i.r(v),i.d(v,"BarcodeReader",function(){return Be}),i.d(v,"TwoOfFiveReader",function(){return Ot}),i.d(v,"NewCodabarReader",function(){return St}),i.d(v,"Code128Reader",function(){return Mt}),i.d(v,"Code32Reader",function(){return At}),i.d(v,"Code39Reader",function(){return Mn}),i.d(v,"Code39VINReader",function(){return Et}),i.d(v,"Code93Reader",function(){return Pt}),i.d(v,"EAN2Reader",function(){return zt}),i.d(v,"EAN5Reader",function(){return Bt}),i.d(v,"EAN8Reader",function(){return Nt}),i.d(v,"EANReader",function(){return Le}),i.d(v,"I2of5Reader",function(){return Ut}),i.d(v,"PharmacodeReader",function(){return Xn}),i.d(v,"UPCEReader",function(){return Gt}),i.d(v,"UPCReader",function(){return Ht});var x=i(9),b=i.n(x),M=i(15),E=i.n(M),P=(i(141),i(80)),j=i.n(P),B=i(2),I=i.n(B),G=i(3),z=i.n(G),Q=i(0),R=i.n(Q),F=typeof Float32Array<"u"?Float32Array:Array,$=Math.random;function oe(n){return n>=0?Math.round(n):n%.5==0?Math.floor(n):Math.round(n)}function xe(){var n=new F(4);return F!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n}function me(n){var r=new F(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function Me(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}function V(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n}function te(n,r,e,t){var o=new F(4);return o[0]=n,o[1]=r,o[2]=e,o[3]=t,o}function W(n,r,e,t,o){return n[0]=r,n[1]=e,n[2]=t,n[3]=o,n}function L(n,r){if(n===r){var e=r[1];n[1]=r[2],n[2]=e}else n[0]=r[0],n[1]=r[2],n[2]=r[1],n[3]=r[3];return n}function Y(n,r){var e=r[0],t=r[1],o=r[2],a=r[3],u=e*a-o*t;return u?(u=1/u,n[0]=a*u,n[1]=-t*u,n[2]=-o*u,n[3]=e*u,n):null}function Ce(n,r){var e=r[0];return n[0]=r[3],n[1]=-r[1],n[2]=-r[2],n[3]=e,n}function _e(n){return n[0]*n[3]-n[2]*n[1]}function ie(n,r,e){var t=r[0],o=r[1],a=r[2],u=r[3],f=e[0],p=e[1],d=e[2],g=e[3];return n[0]=t*f+a*p,n[1]=o*f+u*p,n[2]=t*d+a*g,n[3]=o*d+u*g,n}function K(n,r,e){var t=r[0],o=r[1],a=r[2],u=r[3],f=Math.sin(e),p=Math.cos(e);return n[0]=t*p+a*f,n[1]=o*p+u*f,n[2]=t*-f+a*p,n[3]=o*-f+u*p,n}function Re(n,r,e){var t=r[0],o=r[1],a=r[2],u=r[3],f=e[0],p=e[1];return n[0]=t*f,n[1]=o*f,n[2]=a*p,n[3]=u*p,n}function ue(n,r){var e=Math.sin(r),t=Math.cos(r);return n[0]=t,n[1]=e,n[2]=-e,n[3]=t,n}function de(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=r[1],n}function be(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function re(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]+n[3]*n[3])}function Fe(n,r,e,t){return n[2]=t[2]/t[0],e[0]=t[0],e[1]=t[1],e[3]=t[3]-n[2]*e[1],[n,r,e]}function Ie(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n[3]=r[3]+e[3],n}function dn(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],n[3]=r[3]-e[3],n}function ke(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]}function We(n,r){var e=n[0],t=n[1],o=n[2],a=n[3],u=r[0],f=r[1],p=r[2],d=r[3];return Math.abs(e-u)<=1e-6*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(t-f)<=1e-6*Math.max(1,Math.abs(t),Math.abs(f))&&Math.abs(o-p)<=1e-6*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-d)<=1e-6*Math.max(1,Math.abs(a),Math.abs(d))}function Xr(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n[3]=r[3]*e,n}function Qr(n,r,e,t){return n[0]=r[0]+e[0]*t,n[1]=r[1]+e[1]*t,n[2]=r[2]+e[2]*t,n[3]=r[3]+e[3]*t,n}var $r=ie,Zr=dn;function nt(){var n=new F(2);return F!=Float32Array&&(n[0]=0,n[1]=0),n}function Yr(n){var r=new F(2);return r[0]=n[0],r[1]=n[1],r}function Kr(n,r){var e=new F(2);return e[0]=n,e[1]=r,e}function Jr(n,r){return n[0]=r[0],n[1]=r[1],n}function eo(n,r,e){return n[0]=r,n[1]=e,n}function no(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n}function tt(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n}function rt(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n}function ot(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n}function to(n,r){return n[0]=Math.ceil(r[0]),n[1]=Math.ceil(r[1]),n}function ro(n,r){return n[0]=Math.floor(r[0]),n[1]=Math.floor(r[1]),n}function oo(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n}function io(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n}function ao(n,r){return n[0]=oe(r[0]),n[1]=oe(r[1]),n}function uo(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n}function co(n,r,e,t){return n[0]=r[0]+e[0]*t,n[1]=r[1]+e[1]*t,n}function it(n,r){var e=r[0]-n[0],t=r[1]-n[1];return Math.sqrt(e*e+t*t)}function at(n,r){var e=r[0]-n[0],t=r[1]-n[1];return e*e+t*t}function ut(n){var r=n[0],e=n[1];return Math.sqrt(r*r+e*e)}function ct(n){var r=n[0],e=n[1];return r*r+e*e}function so(n,r){return n[0]=-r[0],n[1]=-r[1],n}function lo(n,r){return n[0]=1/r[0],n[1]=1/r[1],n}function fo(n,r){var e=r[0],t=r[1],o=e*e+t*t;return o>0&&(o=1/Math.sqrt(o)),n[0]=r[0]*o,n[1]=r[1]*o,n}function ho(n,r){return n[0]*r[0]+n[1]*r[1]}function po(n,r,e){var t=r[0]*e[1]-r[1]*e[0];return n[0]=n[1]=0,n[2]=t,n}function vo(n,r,e,t){var o=r[0],a=r[1];return n[0]=o+t*(e[0]-o),n[1]=a+t*(e[1]-a),n}function go(n,r){r=r===void 0?1:r;var e=2*$()*Math.PI;return n[0]=Math.cos(e)*r,n[1]=Math.sin(e)*r,n}function mo(n,r,e){var t=r[0],o=r[1];return n[0]=e[0]*t+e[2]*o,n[1]=e[1]*t+e[3]*o,n}function yo(n,r,e){var t=r[0],o=r[1];return n[0]=e[0]*t+e[2]*o+e[4],n[1]=e[1]*t+e[3]*o+e[5],n}function xo(n,r,e){var t=r[0],o=r[1];return n[0]=e[0]*t+e[3]*o+e[6],n[1]=e[1]*t+e[4]*o+e[7],n}function _o(n,r,e){var t=r[0],o=r[1];return n[0]=e[0]*t+e[4]*o+e[12],n[1]=e[1]*t+e[5]*o+e[13],n}function bo(n,r,e,t){var o=r[0]-e[0],a=r[1]-e[1],u=Math.sin(t),f=Math.cos(t);return n[0]=o*f-a*u+e[0],n[1]=o*u+a*f+e[1],n}function wo(n,r){var e=n[0],t=n[1],o=r[0],a=r[1];return Math.abs(Math.atan2(t*o-e*a,e*o+t*a))}function Oo(n,r){var e=n[0],t=n[1],o=r[0],a=r[1];return Math.atan2(e*a-t*o,e*o+t*a)}function Co(n){return n[0]=0,n[1]=0,n}function So(n){return"vec2("+n[0]+", "+n[1]+")"}function Mo(n,r){return n[0]===r[0]&&n[1]===r[1]}function Ro(n,r){var e=n[0],t=n[1],o=r[0],a=r[1];return Math.abs(e-o)<=1e-6*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(t-a)<=1e-6*Math.max(1,Math.abs(t),Math.abs(a))}var Qe,Ao=ut,Eo=tt,ko=rt,Po=ot,jo=it,Do=at,To=ct,Io=(Qe=nt(),function(n,r,e,t,o,a){var u,f;for(r||(r=2),e||(e=0),f=t?Math.min(t*r+e,n.length):n.length,u=e;u<f;u+=r)Qe[0]=n[u],Qe[1]=n[u+1],o(Qe,Qe,a),n[u]=Qe[0],n[u+1]=Qe[1];return n});function st(){var n=new F(3);return F!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function zo(n){var r=new F(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}function lt(n){var r=n[0],e=n[1],t=n[2];return Math.sqrt(r*r+e*e+t*t)}function Bo(n,r,e){var t=new F(3);return t[0]=n,t[1]=r,t[2]=e,t}function No(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n}function Uo(n,r,e,t){return n[0]=r,n[1]=e,n[2]=t,n}function Fo(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n}function ft(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],n}function dt(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n[2]=r[2]*e[2],n}function ht(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n[2]=r[2]/e[2],n}function Wo(n,r){return n[0]=Math.ceil(r[0]),n[1]=Math.ceil(r[1]),n[2]=Math.ceil(r[2]),n}function Lo(n,r){return n[0]=Math.floor(r[0]),n[1]=Math.floor(r[1]),n[2]=Math.floor(r[2]),n}function Vo(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n[2]=Math.min(r[2],e[2]),n}function qo(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n[2]=Math.max(r[2],e[2]),n}function Go(n,r){return n[0]=oe(r[0]),n[1]=oe(r[1]),n[2]=oe(r[2]),n}function Ho(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n}function Xo(n,r,e,t){return n[0]=r[0]+e[0]*t,n[1]=r[1]+e[1]*t,n[2]=r[2]+e[2]*t,n}function pt(n,r){var e=r[0]-n[0],t=r[1]-n[1],o=r[2]-n[2];return Math.sqrt(e*e+t*t+o*o)}function vt(n,r){var e=r[0]-n[0],t=r[1]-n[1],o=r[2]-n[2];return e*e+t*t+o*o}function gt(n){var r=n[0],e=n[1],t=n[2];return r*r+e*e+t*t}function Qo(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n}function $o(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n}function Zo(n,r){var e=r[0],t=r[1],o=r[2],a=e*e+t*t+o*o;return a>0&&(a=1/Math.sqrt(a)),n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n}function Nn(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]}function Yo(n,r,e){var t=r[0],o=r[1],a=r[2],u=e[0],f=e[1],p=e[2];return n[0]=o*p-a*f,n[1]=a*u-t*p,n[2]=t*f-o*u,n}function Ko(n,r,e,t){var o=r[0],a=r[1],u=r[2];return n[0]=o+t*(e[0]-o),n[1]=a+t*(e[1]-a),n[2]=u+t*(e[2]-u),n}function Jo(n,r,e,t){var o=Math.acos(Math.min(Math.max(Nn(r,e),-1),1)),a=Math.sin(o),u=Math.sin((1-t)*o)/a,f=Math.sin(t*o)/a;return n[0]=u*r[0]+f*e[0],n[1]=u*r[1]+f*e[1],n[2]=u*r[2]+f*e[2],n}function ei(n,r,e,t,o,a){var u=a*a,f=u*(2*a-3)+1,p=u*(a-2)+a,d=u*(a-1),g=u*(3-2*a);return n[0]=r[0]*f+e[0]*p+t[0]*d+o[0]*g,n[1]=r[1]*f+e[1]*p+t[1]*d+o[1]*g,n[2]=r[2]*f+e[2]*p+t[2]*d+o[2]*g,n}function ni(n,r,e,t,o,a){var u=1-a,f=u*u,p=a*a,d=f*u,g=3*a*f,m=3*p*u,_=p*a;return n[0]=r[0]*d+e[0]*g+t[0]*m+o[0]*_,n[1]=r[1]*d+e[1]*g+t[1]*m+o[1]*_,n[2]=r[2]*d+e[2]*g+t[2]*m+o[2]*_,n}function ti(n,r){r=r===void 0?1:r;var e=2*$()*Math.PI,t=2*$()-1,o=Math.sqrt(1-t*t)*r;return n[0]=Math.cos(e)*o,n[1]=Math.sin(e)*o,n[2]=t*r,n}function ri(n,r,e){var t=r[0],o=r[1],a=r[2],u=e[3]*t+e[7]*o+e[11]*a+e[15];return u=u||1,n[0]=(e[0]*t+e[4]*o+e[8]*a+e[12])/u,n[1]=(e[1]*t+e[5]*o+e[9]*a+e[13])/u,n[2]=(e[2]*t+e[6]*o+e[10]*a+e[14])/u,n}function oi(n,r,e){var t=r[0],o=r[1],a=r[2];return n[0]=t*e[0]+o*e[3]+a*e[6],n[1]=t*e[1]+o*e[4]+a*e[7],n[2]=t*e[2]+o*e[5]+a*e[8],n}function ii(n,r,e){var t=e[0],o=e[1],a=e[2],u=e[3],f=r[0],p=r[1],d=r[2],g=o*d-a*p,m=a*f-t*d,_=t*p-o*f;return g+=g,m+=m,_+=_,n[0]=f+u*g+o*_-a*m,n[1]=p+u*m+a*g-t*_,n[2]=d+u*_+t*m-o*g,n}function ai(n,r,e,t){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(t)-o[2]*Math.sin(t),a[2]=o[1]*Math.sin(t)+o[2]*Math.cos(t),n[0]=a[0]+e[0],n[1]=a[1]+e[1],n[2]=a[2]+e[2],n}function ui(n,r,e,t){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(t)+o[0]*Math.cos(t),a[1]=o[1],a[2]=o[2]*Math.cos(t)-o[0]*Math.sin(t),n[0]=a[0]+e[0],n[1]=a[1]+e[1],n[2]=a[2]+e[2],n}function ci(n,r,e,t){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(t)-o[1]*Math.sin(t),a[1]=o[0]*Math.sin(t)+o[1]*Math.cos(t),a[2]=o[2],n[0]=a[0]+e[0],n[1]=a[1]+e[1],n[2]=a[2]+e[2],n}function si(n,r){var e=n[0],t=n[1],o=n[2],a=r[0],u=r[1],f=r[2],p=Math.sqrt((e*e+t*t+o*o)*(a*a+u*u+f*f)),d=p&&Nn(n,r)/p;return Math.acos(Math.min(Math.max(d,-1),1))}function li(n){return n[0]=0,n[1]=0,n[2]=0,n}function fi(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function di(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]}function hi(n,r){var e=n[0],t=n[1],o=n[2],a=r[0],u=r[1],f=r[2];return Math.abs(e-a)<=1e-6*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(t-u)<=1e-6*Math.max(1,Math.abs(t),Math.abs(u))&&Math.abs(o-f)<=1e-6*Math.max(1,Math.abs(o),Math.abs(f))}var pi=ft,vi=dt,gi=ht,mi=pt,yi=vt,xi=lt,_i=gt,bi=(function(){var n=st();return function(r,e,t,o,a,u){var f,p;for(e||(e=3),t||(t=0),p=o?Math.min(o*e+t,r.length):r.length,f=t;f<p;f+=e)n[0]=r[f],n[1]=r[f+1],n[2]=r[f+2],a(n,n,u),r[f]=n[0],r[f+1]=n[1],r[f+2]=n[2];return r}})(),on=function(n,r){n.fill(r)},wi=function(n){for(var r=0,e=0;e<n.length;e++)n[e]>n[r]&&(r=e);return r},Un=function(n){for(var r=n.length,e=0;r--;)e+=n[r];return e},Oi=function(n,r){var e=[],t={rad:0,vec:s.clone([0,0])},o={};function a(f){o[f.id]=f,e.push(f)}function u(){var f,p=0;for(f=0;f<e.length;f++)p+=e[f].rad;t.rad=p/e.length,t.vec=s.clone([Math.cos(t.rad),Math.sin(t.rad)])}return a(n),u(),{add:function(f){o[f.id]||(a(f),u())},fits:function(f){return Math.abs(s.dot(f.point.vec,t.vec))>r},getPoints:function(){return e},getCenter:function(){return t}}},Ci=function(n,r,e){return{rad:n[e],point:n,id:r}};function Fn(n,r){return{x:n,y:r,toVec2:function(){return s.clone([this.x,this.y])},toVec3:function(){return h.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function Si(n,r){r||(r=8);for(var e=n.data,t=e.length,o=8-r,a=new Int32Array(1<<r);t--;)a[e[t]>>o]++;return a}function Mi(n,r){var e=(function(t){var o,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,u=8-a;function f(m,_){for(var S=0,O=m;O<=_;O++)S+=o[O];return S}function p(m,_){for(var S=0,O=m;O<=_;O++)S+=O*o[O];return S}function d(){var m,_,S,O,w=[0],C=(1<<a)-1;o=Si(t,a);for(var A=1;A<C;A++)(S=(m=f(0,A))*(_=f(A+1,C)))===0&&(S=1),O=p(0,A)*_-p(A+1,C)*m,w[A]=O*O/S;return wi(w)}var g=d();return g<<u})(n);return(function(t,o,a){a||(a=t);for(var u=t.data,f=u.length,p=a.data;f--;)p[f]=u[f]<o?1:0})(n,e,r),e}function Ri(n,r,e){var t=n.length/4|0;if(e&&e.singleChannel===!0)for(var o=0;o<t;o++){var a=n[4*o+3];r[o]=a===0?255:n[4*o+0]}else for(var u=0;u<t;u++){var f=n[4*u+3];r[u]=f===0?255:.299*n[4*u+0]+.587*n[4*u+1]+.114*n[4*u+2]}}function Ai(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],e=n[0],t=n[1],o=n[2],a=o*t,u=a*(1-Math.abs(e/60%2-1)),f=o-a,p=0,d=0,g=0;return e<60?(p=a,d=u):e<120?(p=u,d=a):e<180?(d=a,g=u):e<240?(d=u,g=a):e<300?(p=u,g=a):e<360&&(p=a,g=u),r[0]=255*(p+f)|0,r[1]=255*(d+f)|0,r[2]=255*(g+f)|0,r}function On(n){if(!Number.isFinite(n)||n<1)return[];for(var r=[],e=[],t=Math.sqrt(n),o=1;o<=t;o++)n%o==0&&(e.push(o),o!==n/o&&r.unshift(Math.floor(n/o)));return e.concat(r)}function mt(n,r){var e,t=On(r.x),o=On(r.y),a=Math.max(r.x,r.y),u=(function(S,O){for(var w=0,C=0,A=[];w<S.length&&C<O.length;)S[w]===O[C]?(A.push(S[w]),w++,C++):S[w]>O[C]?C++:w++;return A})(t,o),f=[8,10,15,20,32,60,80],p={"x-small":5,small:4,medium:3,large:2,"x-large":1},d=p[n]||p.medium,g=f[d],m=Math.floor(a/g);function _(S){for(var O=0,w=S[Math.floor(S.length/2)];O<S.length-1&&S[O]<m;)O++;return O>0&&(w=Math.abs(S[O]-m)>Math.abs(S[O-1]-m)?S[O-1]:S[O]),m/w<f[d+1]/f[d]&&m/w>f[d-1]/f[d]?{x:w,y:w}:null}return(e=_(u))||(e=_(On(a)))||(e=_(On(m*g))),e||(e={x:Math.max(1,r.x),y:Math.max(1,r.y)}),e}var yt={top:function(n,r){return n.unit==="%"?Math.floor(r.height*(n.value/100)):null},right:function(n,r){return n.unit==="%"?Math.floor(r.width-r.width*(n.value/100)):null},bottom:function(n,r){return n.unit==="%"?Math.floor(r.height-r.height*(n.value/100)):null},left:function(n,r){return n.unit==="%"?Math.floor(r.width*(n.value/100)):null}};function Ei(n,r,e){var t={width:n,height:r},o=Object.keys(e).reduce(function(a,u){if(!yt[u])return a;var f=(function(d){return{value:parseFloat(d),unit:(d.indexOf("%"),d.length,"%")}})(e[u]),p=yt[u](f,t);return a[u]=p,a},{});return{sx:o.left,sy:o.top,sw:o.right-o.left,sh:o.bottom-o.top}}function Wn(n){if(n<0)throw new Error("expected positive number, received ".concat(n))}var Ae=(function(){return z()(function n(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uint8Array,o=arguments.length>3?arguments[3]:void 0;I()(this,n),R()(this,"data",void 0),R()(this,"size",void 0),R()(this,"indexMapping",void 0),e?this.data=e:(this.data=new t(r.x*r.y),o&&on(this.data,0)),this.size=r},[{key:"inImageWithBorder",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Wn(r),n.x>=0&&n.y>=0&&n.x<this.size.x+2*r&&n.y<this.size.y+2*r}},{key:"subImageAsCopy",value:function(n,r){Wn(r.x),Wn(r.y);for(var e=n.size,t=e.x,o=e.y,a=0;a<t;a++)for(var u=0;u<o;u++)n.data[u*t+a]=this.data[(r.y+u)*this.size.x+r.x+a];return n}},{key:"get",value:function(n,r){return this.data[r*this.size.x+n]}},{key:"getSafe",value:function(n,r){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var e=0;e<this.size.x;e++)this.indexMapping.x[e]=e,this.indexMapping.x[e+this.size.x]=e;for(var t=0;t<this.size.y;t++)this.indexMapping.y[t]=t,this.indexMapping.y[t+this.size.y]=t}return this.data[this.indexMapping.y[r+this.size.y]*this.size.x+this.indexMapping.x[n+this.size.x]]}},{key:"set",value:function(n,r,e){return this.data[r*this.size.x+n]=e,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var n=this.size,r=n.x,e=n.y,t=0;t<r;t++)this.data[t]=this.data[(e-1)*r+t]=0;for(var o=1;o<e-1;o++)this.data[o*r]=this.data[o*r+(r-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(n){var r,e,t,o,a,u,f,p,d,g,m=this.data,_=this.size.y,S=this.size.x,O=[],w=[],C=Math.PI,A=C/4;if(n<=0)return w;for(a=0;a<n;a++)O[a]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(e=0;e<_;e++)for(o=e*e,r=0;r<S;r++)(t=m[e*S+r])>0&&((u=O[t-1]).m00+=1,u.m01+=e,u.m10+=r,u.m11+=r*e,u.m02+=o,u.m20+=r*r);for(a=0;a<n;a++)u=O[a],isNaN(u.m00)||u.m00===0||(p=u.m10/u.m00,d=u.m01/u.m00,f=u.m11/u.m00-p*d,g=(u.m02/u.m00-d*d-(u.m20/u.m00-p*p))/(2*f),g=.5*Math.atan(g)+(f>=0?A:-A)+C,u.theta=(180*g/C+90)%180-90,u.theta<0&&(u.theta+=180),u.rad=g>C?g-C:g,u.vec=s.clone([Math.cos(g),Math.sin(g)]),w.push(u));return w}},{key:"getAsRGBA",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=new Uint8ClampedArray(4*this.size.x*this.size.y),e=0;e<this.size.y;e++)for(var t=0;t<this.size.x;t++){var o=e*this.size.x+t,a=this.get(t,e)*n;r[4*o+0]=a,r[4*o+1]=a,r[4*o+2]=a,r[4*o+3]=255}return r}},{key:"show",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var e=n.getContext("2d");if(!e)throw new Error("Unable to get canvas context");var t=e.getImageData(0,0,n.width,n.height),o=this.getAsRGBA(r);n.width=this.size.x,n.height=this.size.y;var a=new ImageData(o,t.width,t.height);e.putImageData(a,0,0)}},{key:"overlay",value:function(n,r,e){var t=r<0||r>360?360:r,o=[0,1,1],a=[0,0,0],u=[255,255,255],f=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var p=n.getContext("2d");if(!p)throw new Error("Unable to get canvas context");for(var d=p.getImageData(e.x,e.y,this.size.x,this.size.y),g=d.data,m=this.data.length;m--;){o[0]=this.data[m]*t;var _=4*m,S=o[0]<=0?u:o[0]>=360?f:Ai(o,a),O=j()(S,3);g[_]=O[0],g[_+1]=O[1],g[_+2]=O[2],g[_+3]=255}p.putImageData(d,e.x,e.y)}}])})(),ki=i(7),ze=i.n(ki),Pi=i(6),ce=i.n(Pi),Ln={drawRect:function(n,r,e,t){e.strokeStyle=t.color,e.fillStyle=t.color,e.lineWidth=t.lineWidth||1,e.beginPath(),e.strokeRect(n.x,n.y,r.x,r.y)},drawPath:function(n,r,e,t){e.strokeStyle=t.color,e.fillStyle=t.color,e.lineWidth=t.lineWidth,e.beginPath(),e.moveTo(n[0][r.x],n[0][r.y]);for(var o=1;o<n.length;o++)e.lineTo(n[o][r.x],n[o][r.y]);e.closePath(),e.stroke()},drawImage:function(n,r,e){var t=e.getImageData(0,0,r.x,r.y),o=t.data,a=o.length,u=n.length;if(a/u!=4)return!1;for(;u--;){var f=n[u];o[--a]=255,o[--a]=f,o[--a]=f,o[--a]=f}return e.putImageData(t,0,0),!0}},ji=i(4),he=i.n(ji),Di=i(1),X=i.n(Di),Ti=i(5),ve=i.n(Ti),xt=(function(n){return n[n.Forward=1]="Forward",n[n.Reverse=-1]="Reverse",n})({}),_t=(function(){return z()(function n(r,e){I()(this,n),R()(this,"_row",[]),R()(this,"config",{}),R()(this,"supplements",[]),R()(this,"SINGLE_CODE_ERROR",0),R()(this,"FORMAT","unknown"),R()(this,"CONFIG_KEYS",{}),this._row=[],this.config=r||{},e&&(this.supplements=e)},[{key:"_nextUnset",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=r;e<n.length;e++)if(!n[e])return e;return n.length}},{key:"_matchPattern",value:function(n,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.SINGLE_CODE_ERROR||1,t=0,o=0,a=0,u=0,f=0,p=0,d=0,g=0;g<n.length;g++)a+=n[g],u+=r[g];if(a<u)return Number.MAX_VALUE;e*=f=a/u;for(var m=0;m<n.length;m++){if(p=n[m],d=r[m]*f,(o=Math.abs(p-d)/d)>e)return Number.MAX_VALUE;t+=o}return t/u}},{key:"_nextSet",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=r;e<n.length;e++)if(n[e])return e;return n.length}},{key:"_correctBars",value:function(n,r,e){for(var t=e.length,o=0;t--;)(o=n[e[t]]*(1-(1-r)/2))>1&&(n[e[t]]=o)}},{key:"decodePattern",value:function(n){this._row=n;var r=this.decode();return r===null?(this._row.reverse(),(r=this.decode())&&(r.direction=xt.Reverse,r.start=this._row.length-r.start,r.end=this._row.length-r.end)):r.direction=xt.Forward,r&&(r.format=this.FORMAT),r}},{key:"_matchRange",value:function(n,r,e){var t;for(t=n=n<0?0:n;t<r;t++)if(this._row[t]!==e)return!1;return!0}},{key:"_fillCounters",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._nextUnset(this._row),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._row.length,e=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],t=[],o=0;t[o]=0;for(var a=n;a<r;a++)this._row[a]^(e?1:0)?t[o]++:(t[++o]=1,e=!e);return t}},{key:"_toCounters",value:function(n,r){var e=r.length,t=this._row.length,o=!this._row[n],a=0;on(r,0);for(var u=n;u<t;u++)if(this._row[u]^(o?1:0))r[a]++;else{if(++a===e)break;r[a]=1,o=!o}return r}},{key:"decodeImage",value:function(n){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}])})();R()(_t,"adjacentLineValidationMatches",0);var Be=_t;function Ii(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var bt=[3,1,3,1,1,1],zi=[3,1,1,1,3],wt=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],Bi=bt.reduce(function(n,r){return n+r},0),Ot=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=Ii(this,r,[].concat(o)),R()(e,"barSpaceRatio",[1,1]),R()(e,"FORMAT","2of5"),R()(e,"SINGLE_CODE_ERROR",.78),R()(e,"AVG_CODE_ERROR",.3),e}return ve()(r,n),z()(r,[{key:"_findPattern",value:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],a=arguments.length>3&&arguments[3]!==void 0&&arguments[3],u=[],f=0,p={error:Number.MAX_VALUE,code:-1,start:0,end:0},d=0,g=0,m=this.AVG_CODE_ERROR;t||(t=this._nextSet(this._row));for(var _=0;_<e.length;_++)u[_]=0;for(var S=t;S<this._row.length;S++)if(this._row[S]^(o?1:0))u[f]++;else{if(f===u.length-1){d=0;for(var O=0;O<u.length;O++)d+=u[O];if((g=this._matchPattern(u,e))<m)return p.error=g,p.start=S-d,p.end=S,p;if(!a)return null;for(var w=0;w<u.length-2;w++)u[w]=u[w+2];u[u.length-2]=0,u[u.length-1]=0,f--}else f++;u[f]=1,o=!o}return null}},{key:"_findStart",value:function(){for(var e=null,t=this._nextSet(this._row),o=1,a=0;!e;){if(!(e=this._findPattern(bt,t,!1,!0)))return null;if(o=Math.floor((e.end-e.start)/Bi),(a=e.start-5*o)>=0&&this._matchRange(a,e.start,0))return e;t=e.end,e=null}return e}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(){this._row.reverse();var e=this._nextSet(this._row),t=this._findPattern(zi,e,!1,!0);if(this._row.reverse(),t===null)return null;var o=t.start;return t.start=this._row.length-t.end,t.end=this._row.length-o,t!==null?this._verifyTrailingWhitespace(t):null}},{key:"_verifyCounterLength",value:function(e){return e.length%10==0}},{key:"_decodeCode",value:function(e){for(var t=this.AVG_CODE_ERROR,o={error:Number.MAX_VALUE,code:-1,start:0,end:0},a=0;a<wt.length;a++){var u=this._matchPattern(e,wt[a]);u<o.error&&(o.code=a,o.error=u)}return o.error<t?o:null}},{key:"_decodePayload",value:function(e,t,o){for(var a=0,u=e.length,f=[0,0,0,0,0],p=null;a<u;){for(var d=0;d<5;d++)f[d]=e[a]*this.barSpaceRatio[0],a+=2;if(!(p=this._decodeCode(f)))return null;t.push("".concat(p.code)),o.push(p)}return p}},{key:"decode",value:function(e,t){var o=this._findStart();if(!o)return null;var a=this._findEnd();if(!a)return null;var u=this._fillCounters(o.end,a.start,!1);if(!this._verifyCounterLength(u))return null;var f=[];f.push(o);var p=[];return this._decodePayload(u,p,f)?p.length<5?null:(f.push(a),{code:p.join(""),start:o.start,end:a.end,startInfo:o,decodedCodes:f,format:this.FORMAT}):null}}])})(Be);function Ni(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Vn=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],qn=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],Ct=[26,41,11,14],St=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=Ni(this,r,[].concat(o)),R()(e,"_counters",[]),R()(e,"FORMAT","codabar"),e}return ve()(r,n),z()(r,[{key:"_computeAlternatingThreshold",value:function(e,t){for(var o=Number.MAX_VALUE,a=0,u=0,f=e;f<t;f+=2)(u=this._counters[f])>a&&(a=u),u<o&&(o=u);return(o+a)/2|0}},{key:"_toPattern",value:function(e){var t=e+7;if(t>this._counters.length)return-1;for(var o=this._computeAlternatingThreshold(e,t),a=this._computeAlternatingThreshold(e+1,t),u=64,f=0,p=0,d=0;d<7;d++)f=(1&d)==0?o:a,this._counters[e+d]>f&&(p|=u),u>>=1;return p}},{key:"_isStartEnd",value:function(e){for(var t=0;t<Ct.length;t++)if(Ct[t]===e)return!0;return!1}},{key:"_sumCounters",value:function(e,t){for(var o=0,a=e;a<t;a++)o+=this._counters[a];return o}},{key:"_findStart",value:function(){for(var e=this._nextUnset(this._row),t=1;t<this._counters.length;t++){var o=this._toPattern(t);if(o!==-1&&this._isStartEnd(o))return{start:e+=this._sumCounters(0,t),end:e+this._sumCounters(t,t+8),startCounter:t,endCounter:t+8}}return null}},{key:"_patternToChar",value:function(e){for(var t=0;t<qn.length;t++)if(qn[t]===e)return String.fromCharCode(Vn[t]);return null}},{key:"_calculatePatternLength",value:function(e){for(var t=0,o=e;o<e+7;o++)t+=this._counters[o];return t}},{key:"_verifyWhitespace",value:function(e,t){return(e-1<=0||this._counters[e-1]>=this._calculatePatternLength(e)/2)&&(t+8>=this._counters.length||this._counters[t+7]>=this._calculatePatternLength(t)/2)}},{key:"_charToPattern",value:function(e){for(var t=e.charCodeAt(0),o=0;o<Vn.length;o++)if(Vn[o]===t)return qn[o];return 0}},{key:"_thresholdResultPattern",value:function(e,t){for(var o,a={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},u=t,f=0;f<e.length;f++){o=this._charToPattern(e[f]);for(var p=6;p>=0;p--){var d=(1&p)==2?a.bar:a.space,g=(1&o)==1?d.wide:d.narrow;g.size+=this._counters[u+p],g.counts++,o>>=1}u+=8}return["space","bar"].forEach(function(m){var _=a[m];_.wide.min=Math.floor((_.narrow.size/_.narrow.counts+_.wide.size/_.wide.counts)/2),_.narrow.max=Math.ceil(_.wide.min),_.wide.max=Math.ceil((2*_.wide.size+1.5)/_.wide.counts)}),a}},{key:"_validateResult",value:function(e,t){for(var o,a=this._thresholdResultPattern(e,t),u=t,f=0;f<e.length;f++){o=this._charToPattern(e[f]);for(var p=6;p>=0;p--){var d=(1&p)==0?a.bar:a.space,g=(1&o)==1?d.wide:d.narrow,m=this._counters[u+p];if(m<g.min||m>g.max)return!1;o>>=1}u+=8}return!0}},{key:"decode",value:function(e,t){if(this._counters=this._fillCounters(),!(t=this._findStart()))return null;var o,a=t.startCounter,u=[];do{if((o=this._toPattern(a))<0)return null;var f=this._patternToChar(o);if(f===null)return null;if(u.push(f),a+=8,u.length>1&&this._isStartEnd(o))break}while(a<this._counters.length);if(u.length-2<4||!this._isStartEnd(o)||!this._verifyWhitespace(t.startCounter,a-8)||!this._validateResult(u,t.startCounter))return null;a=a>this._counters.length?this._counters.length:a;var p=t.start+this._sumCounters(t.startCounter,a-8);return{code:u.join(""),start:t.start,end:p,startInfo:t,decodedCodes:u,format:this.FORMAT}}}])})(Be);function Ui(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Mt=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=Ui(this,r,[].concat(o)),R()(e,"CODE_SHIFT",98),R()(e,"CODE_C",99),R()(e,"CODE_B",100),R()(e,"CODE_A",101),R()(e,"FNC1",102),R()(e,"START_CODE_A",103),R()(e,"START_CODE_B",104),R()(e,"START_CODE_C",105),R()(e,"STOP_CODE",106),R()(e,"FNC1_CHAR",""),R()(e,"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),R()(e,"SINGLE_CODE_ERROR",.64),R()(e,"AVG_CODE_ERROR",.3),R()(e,"FORMAT","code_128"),R()(e,"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),e}return ve()(r,n),z()(r,[{key:"_decodeCode",value:function(e,t){for(var o={error:Number.MAX_VALUE,code:-1,start:e,end:e,correction:{bar:1,space:1}},a=[0,0,0,0,0,0],u=e,f=!this._row[u],p=0,d=u;d<this._row.length;d++)if(this._row[d]^(f?1:0))a[p]++;else{if(p===a.length-1){t&&this._correct(a,t);for(var g=0;g<this.CODE_PATTERN.length;g++){var m=this._matchPattern(a,this.CODE_PATTERN[g]);m<o.error&&(o.code=g,o.error=m)}return o.end=d,o.code===-1||o.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[o.code]&&(o.correction.bar=this.calculateCorrection(this.CODE_PATTERN[o.code],a,this.MODULE_INDICES.bar),o.correction.space=this.calculateCorrection(this.CODE_PATTERN[o.code],a,this.MODULE_INDICES.space)),o)}a[++p]=1,f=!f}return null}},{key:"_correct",value:function(e,t){this._correctBars(e,t.bar,this.MODULE_INDICES.bar),this._correctBars(e,t.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var e=[0,0,0,0,0,0],t=this._nextSet(this._row),o={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},a=!1,u=0,f=t;f<this._row.length;f++)if(this._row[f]^(a?1:0))e[u]++;else{if(u===e.length-1){for(var p=e.reduce(function(_,S){return _+S},0),d=this.START_CODE_A;d<=this.START_CODE_C;d++){var g=this._matchPattern(e,this.CODE_PATTERN[d]);g<o.error&&(o.code=d,o.error=g)}if(o.error<this.AVG_CODE_ERROR)return o.start=f-p,o.end=f,o.correction.bar=this.calculateCorrection(this.CODE_PATTERN[o.code],e,this.MODULE_INDICES.bar),o.correction.space=this.calculateCorrection(this.CODE_PATTERN[o.code],e,this.MODULE_INDICES.space),o;for(var m=0;m<4;m++)e[m]=e[m+2];e[4]=0,e[5]=0,u--}else u++;e[u]=1,a=!a}return null}},{key:"decode",value:function(e,t){var o=this,a=this._findStart();if(a===null)return null;var u={code:a.code,start:a.start,end:a.end,correction:{bar:a.correction.bar,space:a.correction.space}},f=[];f.push(u);for(var p=u.code,d=(function(A){switch(A){case o.START_CODE_A:return o.CODE_A;case o.START_CODE_B:return o.CODE_B;case o.START_CODE_C:return o.CODE_C;default:return null}})(u.code),g=!1,m=!1,_=m,S=!0,O=0,w=[],C=[];!g;){if(_=m,m=!1,(u=this._decodeCode(u.end,u.correction))!==null)switch(u.code!==this.STOP_CODE&&(S=!0),u.code!==this.STOP_CODE&&(w.push(u.code),p+=++O*u.code),f.push(u),d){case this.CODE_A:if(u.code<64)C.push(String.fromCharCode(32+u.code));else if(u.code<96)C.push(String.fromCharCode(u.code-64));else switch(u.code!==this.STOP_CODE&&(S=!1),u.code){case this.CODE_SHIFT:m=!0,d=this.CODE_B;break;case this.CODE_B:d=this.CODE_B;break;case this.CODE_C:d=this.CODE_C;break;case this.FNC1:C.push(this.FNC1_CHAR);break;case this.STOP_CODE:g=!0}break;case this.CODE_B:if(u.code<96)C.push(String.fromCharCode(32+u.code));else switch(u.code!==this.STOP_CODE&&(S=!1),u.code){case this.CODE_SHIFT:m=!0,d=this.CODE_A;break;case this.CODE_A:d=this.CODE_A;break;case this.CODE_C:d=this.CODE_C;break;case this.FNC1:C.push(this.FNC1_CHAR);break;case this.STOP_CODE:g=!0}break;case this.CODE_C:if(u.code<100)C.push(u.code<10?"0"+u.code:u.code);else switch(u.code!==this.STOP_CODE&&(S=!1),u.code){case this.CODE_A:d=this.CODE_A;break;case this.CODE_B:d=this.CODE_B;break;case this.FNC1:C.push(this.FNC1_CHAR);break;case this.STOP_CODE:g=!0}}else g=!0;_&&(d=d===this.CODE_A?this.CODE_B:this.CODE_A)}return u===null?null:(u.end=this._nextUnset(this._row,u.end),this._verifyTrailingWhitespace(u)?(p-=O*w[w.length-1])%103!==w[w.length-1]?null:C.length?(S&&C.splice(C.length-1,1),{code:C.join(""),start:a.start,end:u.end,codeset:d,startInfo:a,decodedCodes:f,endInfo:u,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"calculateCorrection",value:function(e,t,o){for(var a=o.length,u=0,f=0;a--;)f+=e[o[a]],u+=t[o[a]];return f/u}}])})(Be),Fi=i(13),Cn=i.n(Fi),Wi=i(16),Sn=i.n(Wi);function Li(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Vi=new Uint16Array(Sn()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map(function(n){return n.charCodeAt(0)})),Rt=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),Mn=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=Li(this,r,[].concat(o)),R()(e,"FORMAT","code_39"),e}return ve()(r,n),z()(r,[{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=e,o=new Uint16Array([0,0,0,0,0,0,0,0,0]),a=0,u=!1,f=e;f<this._row.length;f++)if(this._row[f]^(u?1:0))o[a]++;else{if(a===o.length-1){if(this._toPattern(o)===148){var p=Math.floor(Math.max(0,t-(f-t)/4));if(this._matchRange(p,t,0))return{start:t,end:f}}t+=o[0]+o[1];for(var d=0;d<7;d++)o[d]=o[d+2];o[7]=0,o[8]=0,a--}else a++;o[a]=1,u=!u}return null}},{key:"_toPattern",value:function(e){for(var t=e.length,o=0,a=t,u=0;a>3;){o=this._findNextWidth(e,o),a=0;for(var f=0,p=0;p<t;p++)e[p]>o&&(f|=1<<t-1-p,a++,u+=e[p]);if(a===3){for(var d=0;d<t&&a>0;d++)if(e[d]>o&&(a--,2*e[d]>=u))return-1;return f}}return-1}},{key:"_findNextWidth",value:function(e,t){for(var o=Number.MAX_VALUE,a=0;a<e.length;a++)e[a]<o&&e[a]>t&&(o=e[a]);return o}},{key:"_patternToChar",value:function(e){for(var t=0;t<Rt.length;t++)if(Rt[t]===e)return String.fromCharCode(Vi[t]);return null}},{key:"_verifyTrailingWhitespace",value:function(e,t,o){var a=Un(o);return 3*(t-e-a)>=a}},{key:"decode",value:function(){var e=new Uint16Array([0,0,0,0,0,0,0,0,0]),t=[],o=this._findStart();if(!o)return null;var a,u,f=this._nextSet(this._row,o.end);do{e=this._toCounters(f,e);var p=this._toPattern(e);if(p<0||(a=this._patternToChar(p))===null)return null;t.push(a),u=f,f+=Un(e),f=this._nextSet(this._row,f)}while(a!=="*");return t.pop(),t.length&&this._verifyTrailingWhitespace(u,f,e)?{code:t.join(""),start:o.start,end:f,startInfo:o,decodedCodes:t,format:this.FORMAT}:null}}])})(Be);function qi(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Gi=/[AEIO]/g,At=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=qi(this,r,[].concat(o)),R()(e,"FORMAT","code_32_reader"),e}return ve()(r,n),z()(r,[{key:"_decodeCode32",value:function(e){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(e))return null;for(var t=0,o=0;o<e.length;o++)t=32*t+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(e[o]);var a="".concat(t);return a.length<9&&(a=("000000000"+a).slice(-9)),"A"+a}},{key:"_checkChecksum",value:function(e){return!!e}},{key:"decode",value:function(){var e,t,o,a,u,f=(e=r,t="decode",o=this,a=3,u=Cn()(X()(1&a?e.prototype:e),t,o),2&a&&typeof u=="function"?function(g){return u.apply(o,g)}:u)([]);if(!f)return null;var p=f.code;if(!p||(p=p.replace(Gi,""),!this._checkChecksum(p)))return null;var d=this._decodeCode32(p);return d?(f.code=d,f):null}}])})(Mn);function Hi(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Xi=/[IOQ]/g,Qi=/[A-Z0-9]{17}/,Et=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=Hi(this,r,[].concat(o)),R()(e,"FORMAT","code_39_vin"),e}return ve()(r,n),z()(r,[{key:"_checkChecksum",value:function(e){return!!e}},{key:"decode",value:function(){var e,t,o,a,u,f=(e=r,t="decode",o=this,a=3,u=Cn()(X()(1&a?e.prototype:e),t,o),2&a&&typeof u=="function"?function(d){return u.apply(o,d)}:u)([]);if(!f)return null;var p=f.code;return p&&(p=p.replace(Xi,"")).match(Qi)&&this._checkChecksum(p)?(f.code=p,f):null}}])})(Mn);function $i(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Gn=new Uint16Array(Sn()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map(function(n){return n.charCodeAt(0)})),kt=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Pt=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=$i(this,r,[].concat(o)),R()(e,"FORMAT","code_93"),e}return ve()(r,n),z()(r,[{key:"_patternToChar",value:function(e){for(var t=0;t<kt.length;t++)if(kt[t]===e)return String.fromCharCode(Gn[t]);return null}},{key:"_toPattern",value:function(e){for(var t=e.length,o=e.reduce(function(d,g){return d+g},0),a=0,u=0;u<t;u++){var f=Math.round(9*e[u]/o);if(f<1||f>4)return-1;if((1&u)==0)for(var p=0;p<f;p++)a=a<<1|1;else a<<=f}return a}},{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=e,o=new Uint16Array([0,0,0,0,0,0]),a=0,u=!1,f=e;f<this._row.length;f++)if(this._row[f]^(u?1:0))o[a]++;else{if(a===o.length-1){if(this._toPattern(o)===350){var p=Math.floor(Math.max(0,t-(f-t)/4));if(this._matchRange(p,t,0))return{start:t,end:f}}t+=o[0]+o[1];for(var d=0;d<4;d++)o[d]=o[d+2];o[4]=0,o[5]=0,a--}else a++;o[a]=1,u=!u}return null}},{key:"_verifyEnd",value:function(e,t){return!(e===t||!this._row[t])}},{key:"_decodeExtended",value:function(e){for(var t=e.length,o=[],a=0;a<t;a++){var u=e[a];if(u>="a"&&u<="d"){if(a>t-2)return null;var f=e[++a],p=f.charCodeAt(0),d=void 0;switch(u){case"a":if(!(f>="A"&&f<="Z"))return null;d=String.fromCharCode(p-64);break;case"b":if(f>="A"&&f<="E")d=String.fromCharCode(p-38);else if(f>="F"&&f<="J")d=String.fromCharCode(p-11);else if(f>="K"&&f<="O")d=String.fromCharCode(p+16);else if(f>="P"&&f<="S")d=String.fromCharCode(p+43);else{if(!(f>="T"&&f<="Z"))return null;d="\x7F"}break;case"c":if(f>="A"&&f<="O")d=String.fromCharCode(p-32);else{if(f!=="Z")return null;d=":"}break;case"d":if(!(f>="A"&&f<="Z"))return null;d=String.fromCharCode(p+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",d),null}o.push(d)}else o.push(u)}return o}},{key:"_matchCheckChar",value:function(e,t,o){var a=e.slice(0,t),u=a.length,f=a.reduce(function(p,d,g){return p+((-1*g+(u-1))%o+1)*Gn.indexOf(d.charCodeAt(0))},0);return Gn[f%47]===e[t].charCodeAt(0)}},{key:"_verifyChecksums",value:function(e){return this._matchCheckChar(e,e.length-2,20)&&this._matchCheckChar(e,e.length-1,15)}},{key:"decode",value:function(e,t){if(!(t=this._findStart()))return null;var o,a,u=new Uint16Array([0,0,0,0,0,0]),f=[],p=this._nextSet(this._row,t.end);do{u=this._toCounters(p,u);var d=this._toPattern(u);if(d<0||(a=this._patternToChar(d))===null)return null;f.push(a),o=p,p+=Un(u),p=this._nextSet(this._row,p)}while(a!=="*");return f.pop(),f.length&&this._verifyEnd(o,p)&&this._verifyChecksums(f)?(f=f.slice(0,f.length-2),(f=this._decodeExtended(f))===null?null:{code:f.join(""),start:t.start,end:p,startInfo:t,decodedCodes:f,format:this.FORMAT}):null}}])})(Be);function jt(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,t)}return e}function Hn(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?jt(Object(e),!0).forEach(function(t){R()(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):jt(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Zi(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Yi=[1,1,1],Dt=[1,1,1,1,1],Ki=[1,1,2],Tt=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],It=[0,11,13,14,19,25,28,21,22,26],Le=(function(n){function r(e,t){var o;return I()(this,r),o=Zi(this,r,[E()({supplements:[]},e),t]),R()(o,"FORMAT","ean_13"),R()(o,"SINGLE_CODE_ERROR",.7),R()(o,"STOP_PATTERN",[1,1,1]),o}return ve()(r,n),z()(r,[{key:"_findPattern",value:function(e,t,o,a){var u=new Array(e.length).fill(0),f={error:Number.MAX_VALUE,start:0,end:0},p=0;t||(t=this._nextSet(this._row));for(var d=!1,g=t;g<this._row.length;g++)if(this._row[g]^(o?1:0))u[p]+=1;else{if(p===u.length-1){var m=this._matchPattern(u,e);if(m<.48&&f.error&&m<f.error)return d=!0,f.error=m,f.start=g-u.reduce(function(S,O){return S+O},0),f.end=g,f;if(a){for(var _=0;_<u.length-2;_++)u[_]=u[_+2];u[u.length-2]=0,u[u.length-1]=0,p--}}else p++;u[p]=1,o=!o}return d?f:null}},{key:"_decodeCode",value:function(e,t){var o=[0,0,0,0],a=e,u={error:Number.MAX_VALUE,code:-1,start:e,end:e},f=!this._row[a],p=0;t||(t=Tt.length);for(var d=a;d<this._row.length;d++)if(this._row[d]^(f?1:0))o[p]++;else{if(p===o.length-1){for(var g=0;g<t;g++){var m=this._matchPattern(o,Tt[g]);u.end=d,m<u.error&&(u.code=g,u.error=m)}return u.error>.48?null:u}o[++p]=1,f=!f}return null}},{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=null;!t;){if(!(t=this._findPattern(Yi,e,!1,!0)))return null;var o=t.start-(t.end-t.start);if(o>=0&&this._matchRange(o,t.start,0))return t;e=t.end,t=null}return null}},{key:"_calculateFirstDigit",value:function(e){for(var t=0;t<It.length;t++)if(e===It[t])return t;return null}},{key:"_decodePayload",value:function(e,t,o){for(var a=Hn({},e),u=0,f=0;f<6;f++){if(!(a=this._decodeCode(a.end)))return null;a.code>=10?(a.code-=10,u|=1<<5-f):u|=0<<5-f,t.push(a.code),o.push(a)}var p=this._calculateFirstDigit(u);if(p===null)return null;t.unshift(p);var d=this._findPattern(Dt,a.end,!0,!1);if(d===null||!d.end)return null;o.push(d);for(var g=0;g<6;g++){if(!(d=this._decodeCode(d.end,10)))return null;o.push(d),t.push(d.code)}return d}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start);return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(e,t){var o=this._findPattern(this.STOP_PATTERN,e,t,!1);return o!==null?this._verifyTrailingWhitespace(o):null}},{key:"_checksum",value:function(e){for(var t=0,o=e.length-2;o>=0;o-=2)t+=e[o];t*=3;for(var a=e.length-1;a>=0;a-=2)t+=e[a];return t%10==0}},{key:"_decodeExtensions",value:function(e){var t=this._nextSet(this._row,e),o=this._findPattern(Ki,t,!1,!1);if(o===null)return null;for(var a=0;a<this.supplements.length;a++)try{var u=this.supplements[a].decode(this._row,o.end);if(u!==null)return{code:u.code,start:t,startInfo:o,end:u.end,decodedCodes:u.decodedCodes,format:this.supplements[a].FORMAT}}catch(f){console.error("* decodeExtensions error in ",this.supplements[a],": ",f)}return null}},{key:"decode",value:function(e,t){var o=new Array,a=new Array,u={},f=this._findStart();if(!f)return null;var p={start:f.start,end:f.end};if(a.push(p),!(p=this._decodePayload(p,o,a))||!(p=this._findEnd(p.end,!1))||(a.push(p),!this._checksum(o)))return null;if(this.supplements.length>0){var d=this._decodeExtensions(p.end);if(!d||!d.decodedCodes)return null;var g=d.decodedCodes[d.decodedCodes.length-1],m={start:g.start+((g.end-g.start)/2|0),end:g.end};if(!this._verifyTrailingWhitespace(m))return null;u={supplement:d,code:o.join("")+d.code}}return Hn(Hn({code:o.join(""),start:f.start,end:p.end,startInfo:f,decodedCodes:a},u),{},{format:this.FORMAT})}}])})(Be);function Ji(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var zt=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=Ji(this,r,[].concat(o)),R()(e,"FORMAT","ean_2"),e}return ve()(r,n),z()(r,[{key:"decode",value:function(e,t){e&&(this._row=e);var o=0,a=t,u=this._row.length,f=[],p=[],d=null;if(a===void 0)return null;for(var g=0;g<2&&a<u;g++){if(!(d=this._decodeCode(a)))return null;p.push(d),f.push(d.code%10),d.code>=10&&(o|=1<<1-g),g!==1&&(a=this._nextSet(this._row,d.end),a=this._nextUnset(this._row,a))}if(f.length!==2||parseInt(f.join(""))%4!==o)return null;var m=this._findStart();return{code:f.join(""),decodedCodes:p,end:d.end,format:this.FORMAT,startInfo:m,start:m.start}}}])})(Le);function ea(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var na=[24,20,18,17,12,6,3,10,9,5],Bt=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=ea(this,r,[].concat(o)),R()(e,"FORMAT","ean_5"),e}return ve()(r,n),z()(r,[{key:"decode",value:function(e,t){if(t===void 0)return null;e&&(this._row=e);for(var o=0,a=t,u=this._row.length,f=null,p=[],d=[],g=0;g<5&&a<u;g++){if(!(f=this._decodeCode(a)))return null;d.push(f),p.push(f.code%10),f.code>=10&&(o|=1<<4-g),g!==4&&(a=this._nextSet(this._row,f.end),a=this._nextUnset(this._row,a))}if(p.length!==5||(function(_){for(var S=_.length,O=0,w=S-2;w>=0;w-=2)O+=_[w];O*=3;for(var C=S-1;C>=0;C-=2)O+=_[C];return(O*=3)%10})(p)!==(function(_){for(var S=0;S<10;S++)if(_===na[S])return S;return null})(o))return null;var m=this._findStart();return{code:p.join(""),decodedCodes:d,end:f.end,format:this.FORMAT,startInfo:m,start:m.start}}}])})(Le);function ta(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Nt=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=ta(this,r,[].concat(o)),R()(e,"FORMAT","ean_8"),e}return ve()(r,n),z()(r,[{key:"_decodePayload",value:function(e,t,o){for(var a=e,u=0;u<4;u++){if(!(a=this._decodeCode(a.end,10)))return null;t.push(a.code),o.push(a)}if((a=this._findPattern(Dt,a.end,!0,!1))===null)return null;o.push(a);for(var f=0;f<4;f++){if(!(a=this._decodeCode(a.end,10)))return null;o.push(a),t.push(a.code)}return a}}])})(Le);function ra(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Ut=(function(n){function r(e){var t;return I()(this,r),t=ra(this,r,[E()({normalizeBarSpaceWidth:!1},e)]),R()(t,"barSpaceRatio",[1,1]),R()(t,"SINGLE_CODE_ERROR",.78),R()(t,"AVG_CODE_ERROR",.38),R()(t,"START_PATTERN",[1,1,1,1]),R()(t,"STOP_PATTERN",[1,1,3]),R()(t,"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),R()(t,"MAX_CORRECTION_FACTOR",5),R()(t,"FORMAT","i2of5"),e.normalizeBarSpaceWidth&&(t.SINGLE_CODE_ERROR=.38,t.AVG_CODE_ERROR=.09),t.config=e,he()(t,t)}return ve()(r,n),z()(r,[{key:"_matchPattern",value:function(e,t){if(this.config.normalizeBarSpaceWidth){for(var o=[0,0],a=[0,0],u=[0,0],f=this.MAX_CORRECTION_FACTOR,p=1/f,d=0;d<e.length;d++)o[d%2]+=e[d],a[d%2]+=t[d];u[0]=a[0]/o[0],u[1]=a[1]/o[1],u[0]=Math.max(Math.min(u[0],f),p),u[1]=Math.max(Math.min(u[1],f),p),this.barSpaceRatio=u;for(var g=0;g<e.length;g++)e[g]*=this.barSpaceRatio[g%2]}return(m=r,_="_matchPattern",S=this,O=3,w=Cn()(X()(1&O?m.prototype:m),_,S),2&O&&typeof w=="function"?function(C){return w.apply(S,C)}:w)([e,t]);var m,_,S,O,w}},{key:"_findPattern",value:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],a=arguments.length>3&&arguments[3]!==void 0&&arguments[3],u=new Array(e.length).fill(0),f=0,p={error:Number.MAX_VALUE,start:0,end:0},d=this.AVG_CODE_ERROR;o=o||!1,a=a||!1,t||(t=this._nextSet(this._row));for(var g=t;g<this._row.length;g++)if(this._row[g]^(o?1:0))u[f]++;else{if(f===u.length-1){var m=u.reduce(function(O,w){return O+w},0),_=this._matchPattern(u,e);if(_<d)return p.error=_,p.start=g-m,p.end=g,p;if(!a)return null;for(var S=0;S<u.length-2;S++)u[S]=u[S+2];u[u.length-2]=0,u[u.length-1]=0,f--}else f++;u[f]=1,o=!o}return null}},{key:"_findStart",value:function(){for(var e=0,t=this._nextSet(this._row),o=null,a=1;!o;){if(!(o=this._findPattern(this.START_PATTERN,t,!1,!0)))return null;if(a=Math.floor((o.end-o.start)/4),(e=o.start-10*a)>=0&&this._matchRange(e,o.start,0))return o;t=o.end,o=null}return null}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(){this._row.reverse();var e=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),e===null)return null;var t=e.start;return e.start=this._row.length-e.end,e.end=this._row.length-t,e!==null?this._verifyTrailingWhitespace(e):null}},{key:"_decodePair",value:function(e){for(var t=[],o=0;o<e.length;o++){var a=this._decodeCode(e[o]);if(!a)return null;t.push(a)}return t}},{key:"_decodeCode",value:function(e){for(var t=this.AVG_CODE_ERROR,o={error:Number.MAX_VALUE,code:-1,start:0,end:0},a=0;a<this.CODE_PATTERN.length;a++){var u=this._matchPattern(e,this.CODE_PATTERN[a]);u<o.error&&(o.code=a,o.error=u)}return o.error<t?o:null}},{key:"_decodePayload",value:function(e,t,o){for(var a=0,u=e.length,f=[[0,0,0,0,0],[0,0,0,0,0]],p=null;a<u;){for(var d=0;d<5;d++)f[0][d]=e[a]*this.barSpaceRatio[0],f[1][d]=e[a+1]*this.barSpaceRatio[1],a+=2;if(!(p=this._decodePair(f)))return null;for(var g=0;g<p.length;g++)t.push(p[g].code+""),o.push(p[g])}return p}},{key:"_verifyCounterLength",value:function(e){return e.length%10==0}},{key:"decode",value:function(e,t){var o=new Array,a=new Array,u=this._findStart();if(!u)return null;a.push(u);var f=this._findEnd();if(!f)return null;var p=this._fillCounters(u.end,f.start,!1);return this._verifyCounterLength(p)&&this._decodePayload(p,o,a)?o.length%2!=0||o.length<6?null:(a.push(f),{code:o.join(""),start:u.start,end:f.end,startInfo:u,decodedCodes:a,format:this.FORMAT}):null}}])})(Be);function hn(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=(function(p,d){if(p){if(typeof p=="string")return Ft(p,d);var g={}.toString.call(p).slice(8,-1);return g==="Object"&&p.constructor&&(g=p.constructor.name),g==="Map"||g==="Set"?Array.from(p):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?Ft(p,d):void 0}})(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,o=function(){};return{s:o,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,u=!0,f=!1;return{s:function(){e=e.call(n)},n:function(){var p=e.next();return u=p.done,p},e:function(p){f=!0,a=p},f:function(){try{u||e.return==null||e.return()}finally{if(f)throw a}}}}function Ft(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=Array(r);e<r;e++)t[e]=n[e];return t}function oa(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Wt=[2,2.5,3],Lt=(function(n){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I()(this,r),e=oa(this,r,[t]),R()(e,"FORMAT","pharmacode"),R()(e,"SINGLE_CODE_ERROR",.7),R()(e,"AVG_CODE_ERROR",.48),e}return ve()(r,n),z()(r,[{key:"_findStart",value:function(){for(var e=0;e<this._row.length;){var t=this._nextSet(this._row,e);if(t>=this._row.length)return null;for(var o=t;o<this._row.length&&this._row[o];)o++;var a=o-t;if(a<5)e=o+1;else{var u=t-Math.max(2*a,20);if(u<0)e=o+1;else if(this._matchRange(u,t,0)){var f=Math.max(10*a,50),p=this._nextSet(this._row,o);if(p>=this._row.length)e=o+1;else{if(!(p-o>f))return{start:t,end:o};e=o+1}}else e=o+1}}return null}},{key:"_smoothBarWidths",value:function(e){if(e.length<=2)return e;for(var t=e.slice(),o=1;o<t.length-1;o++){var a=t[o-1],u=t[o],f=[a,u,t[o+1]].sort(function(d,g){return d-g})[1],p=Math.abs(u-f);p>0&&p<=3&&(t[o]=f)}return t}},{key:"_extractBarsAndSpaces",value:function(e){for(var t=[],o=[],a=e,u=0,f=!1;a<this._row.length&&this._row[a];)u++,a++;if(u===0)return null;for(t.push(u),u=0;a<this._row.length&&!this._row[a];)u++,a++;if(u===0||a>=this._row.length)return null;o.push(u);for(var p=6*(t[0]<o[0]?t[0]:.8*o[0]),d=2.5*o[0];a<this._row.length&&t.length<16;){for(u=0;a<this._row.length&&this._row[a];)u++,a++;if(u===0)break;t.push(u),u=0;for(var g=a;a<this._row.length&&!this._row[a];)u++,a++;if(u===0)break;if(u>=p){f=!0,a=g;break}if(t.length>=2&&u>=d){f=!0,a=g;break}if(a>=this._row.length){f=!0,a=g;break}o.push(u),o.length>=2&&(d=2*(o.reduce(function(m,_){return m+_},0)/o.length))}return f?t.length<2||t.length>16||o.length!==t.length-1?null:this._validateSpaces(o)&&this._validateBarSizeCount(t)?{bars:this._smoothBarWidths(t),spaces:o,end:a}:null:null}},{key:"_validateBarSizeCount",value:function(e){if(e.length===0)return!1;var t,o=[],a=hn(e);try{for(a.s();!(t=a.n()).done;){var u,f=t.value,p=!1,d=hn(o);try{for(d.s();!(u=d.n()).done;){var g=u.value,m=g.reduce(function(_,S){return _+S},0)/g.length;if(Math.abs(f-m)<=.35*m){g.push(f),p=!0;break}}}catch(_){d.e(_)}finally{d.f()}p||o.push([f])}}catch(_){a.e(_)}finally{a.f()}return!(o.length>2)}},{key:"_validateSpaces",value:function(e){if(e.length===0)return!0;var t=e.reduce(function(a,u){return a+u},0)/e.length;if(t===0)return!1;var o=e.reduce(function(a,u){return a+Math.pow(u-t,2)},0)/e.length;return Math.sqrt(o)/t<=.35}},{key:"_validateBarRatios",value:function(e,t){var o=e.reduce(function(Z,pe){return Z+pe},0)/e.length,a=e.reduce(function(Z,pe){return Z+Math.abs(pe-o)},0)/e.length;if((o===0?0:a/o)<=.1){var u=t.length>0?t.reduce(function(Z,pe){return Z+pe},0)/t.length:0;return u>0&&u/o<.7?{narrowWidth:o/2.5,wideRatio:2.5}:{narrowWidth:o,wideRatio:2}}var f=Array.from(new Set(e.slice().sort(function(Z,pe){return Z-pe})));if(f.length<2)return{narrowWidth:e.reduce(function(Z,pe){return Z+pe},0)/e.length,wideRatio:2};for(var p=[],d=0;d<f.length-1;d++){var g,m=(f[d]+f[d+1])/2,_=[],S=[],O=hn(e);try{for(O.s();!(g=O.n()).done;){var w=g.value;w<m?_.push(w):S.push(w)}}catch(Z){O.e(Z)}finally{O.f()}if(_.length!==0&&S.length!==0){for(var C=_.reduce(function(Z,pe){return Z+pe},0)/_.length,A=S.reduce(function(Z,pe){return Z+pe},0)/S.length,k=A/C,T=Wt[0],D=Math.abs(k-T),N=0,q=Wt;N<q.length;N++){var U=q[N],H=Math.abs(k-U);H<D&&(D=H,T=U)}p.push({threshold:m,narrowBars:_,wideBars:S,avgN:C,avgW:A,ratio:k,ratioDiff:D,matchedRatio:T})}}p.sort(function(Z,pe){return Z.ratioDiff-pe.ratioDiff});for(var we=0,Ue=p;we<Ue.length;we++){var ae=Ue[we],cn=.05*ae.matchedRatio;if(!(Math.abs(ae.ratio-ae.matchedRatio)>cn)){var sn,Ee=.15*ae.avgN,Ge=.15*ae.avgW,He=!0,J=hn(ae.narrowBars);try{for(J.s();!(sn=J.n()).done;){var Oe=sn.value;if(Math.abs(Oe-ae.avgN)>Ee){He=!1;break}}}catch(Z){J.e(Z)}finally{J.f()}if(He){var ln,Xe=hn(ae.wideBars);try{for(Xe.s();!(ln=Xe.n()).done;){var Te=ln.value;if(Math.abs(Te-ae.avgW)>Ge){He=!1;break}}}catch(Z){Xe.e(Z)}finally{Xe.f()}if(He)return{narrowWidth:ae.avgN,wideRatio:ae.matchedRatio}}}}return null}},{key:"_validatePeriodicity",value:function(e,t){if(e.length>0){var o=e.reduce(function(g,m){return g+m},0)/e.length,a=e.reduce(function(g,m){return g+Math.pow(m-o,2)},0)/e.length,u=Math.sqrt(a);if((o!==0?u/o:0)>.65)return!1}if(t.length>0){var f=t.reduce(function(g,m){return g+m},0)/t.length,p=t.reduce(function(g,m){return g+Math.pow(m-f,2)},0)/t.length,d=Math.sqrt(p);if((f!==0?d/f:0)>.55)return!1}return!0}},{key:"_validateQuietZones",value:function(e,t,o){var a=1*t;if(e.start>=2&&e.start<a)return!1;var u=this._row.length-o;return u<6||!(u<a)}},{key:"_decodeBars",value:function(e,t){for(var o=1.6*(t??Math.min.apply(Math,Sn()(e))),a=0,u=e.slice().reverse(),f=0;f<u.length;f++)a+=u[f]>o?Math.pow(2,f+1):Math.pow(2,f);for(var p="",d=u.length-1;d>=0;d--)p+=u[d]>o?"W":"N";return{value:a,pattern:p}}},{key:"_verifyTrailingWhitespace",value:function(e,t){var o=Math.min(e+2*t,this._row.length);return this._matchRange(e,o,0)}},{key:"_validatePatternConsistency",value:function(e,t){for(var o=e.start,a=0,u=0,f=0,p=[-2,-1,1,2];f<p.length;f++){var d=o+p[f];if(!(d<0||d>=this._row.length)){u++;var g=this._extractBarsAndSpaces(d);if(g&&g.bars.length===t.length){for(var m=!0,_=0;_<t.length;_++)if(Math.abs(g.bars[_]-t[_])/Math.max(t[_],1)>.25){m=!1;break}m&&a++}}}return u>0&&a>=.5*u}},{key:"decode",value:function(e,t){var o=this._findStart();if(!o||o.start>.5*this._row.length)return null;var a=this._extractBarsAndSpaces(o.start);if(!a)return null;var u=a.bars,f=a.spaces,p=a.end;if(u.reduce(function(O,w){return O+w},0)+f.reduce(function(O,w){return O+w},0)<20||this._row.length-p<0||!this._validateSpaces(f)||!this._validatePeriodicity(u,f)||!this._validatePatternConsistency(o,u))return null;var d=this._validateBarRatios(u,f);if(!d||!this._validateQuietZones(o,d.narrowWidth,p))return null;var g=this._decodeBars(u,d.narrowWidth);if(!g)return null;var m=g.value;if(m<3||m>131070)return null;var _=u.reduce(function(O,w){return O+w},0)/u.length;this._verifyTrailingWhitespace(p,_);var S=u.map(function(O,w){return{code:O>1.6*Math.min.apply(Math,Sn()(u))?1:0,start:0,end:0,error:0}});return{code:m.toString(),start:o.start,end:p,startInfo:o,decodedCodes:S,pattern:g.pattern,format:this.FORMAT}}}])})(Be);R()(Lt,"adjacentLineValidationMatches",1);var Xn=Lt;function Vt(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,t)}return e}function ia(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}function qt(n,r,e,t){var o=Cn()(X()(1&t?n.prototype:n),r,e);return 2&t&&typeof o=="function"?function(a){return o.apply(e,a)}:o}var Gt=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=ia(this,r,[].concat(o)),R()(e,"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),R()(e,"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),R()(e,"FORMAT","upc_e"),e}return ve()(r,n),z()(r,[{key:"_decodePayload",value:function(e,t,o){for(var a=(function(p){for(var d=1;d<arguments.length;d++){var g=arguments[d]!=null?arguments[d]:{};d%2?Vt(Object(g),!0).forEach(function(m){R()(p,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):Vt(Object(g)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(g,m))})}return p})({},e),u=0,f=0;f<6;f++){if(!(a=this._decodeCode(a.end)))return null;a.code>=10&&(a.code=a.code-10,u|=1<<5-f),t.push(a.code),o.push(a)}return this._determineParity(u,t)?a:null}},{key:"_determineParity",value:function(e,t){for(var o=0;o<this.CODE_FREQUENCY.length;o++)for(var a=0;a<this.CODE_FREQUENCY[o].length;a++)if(e===this.CODE_FREQUENCY[o][a])return t.unshift(o),t.push(a),!0;return!1}},{key:"_convertToUPCA",value:function(e){var t=[e[0]],o=e[e.length-2];return(t=o<=2?t.concat(e.slice(1,3)).concat([o,0,0,0,0]).concat(e.slice(3,6)):o===3?t.concat(e.slice(1,4)).concat([0,0,0,0,0]).concat(e.slice(4,6)):o===4?t.concat(e.slice(1,5)).concat([0,0,0,0,0,e[5]]):t.concat(e.slice(1,6)).concat([0,0,0,0,o])).push(e[e.length-1]),t}},{key:"_checksum",value:function(e){return qt(r,"_checksum",this,3)([this._convertToUPCA(e)])}},{key:"_findEnd",value:function(e,t){return qt(r,"_findEnd",this,3)([e,!0])}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}}])})(Le);function aa(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var Ht=(function(n){function r(){var e;I()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=aa(this,r,[].concat(o)),R()(e,"FORMAT","upc_a"),e}return ve()(r,n),z()(r,[{key:"decode",value:function(e,t){var o=Le.prototype.decode.call(this);return o&&o.code&&o.code.length===13&&o.code.charAt(0)==="0"?(o.code=o.code.substring(1),o):null}}])})(Le),Rn={},An={UP:1,DOWN:-1};Rn.getBarcodeLine=function(n,r,e){var t,o,a,u,f,p=0|r.x,d=0|r.y,g=0|e.x,m=0|e.y,_=Math.abs(m-d)>Math.abs(g-p),S=[],O=n.data,w=n.size.x,C=255,A=0;function k(q,U){f=O[U*w+q],C=f<C?f:C,A=f>A?f:A,S.push(f)}_&&(a=p,p=d,d=a,a=g,g=m,m=a),p>g&&(a=p,p=g,g=a,a=d,d=m,m=a);var T=g-p,D=Math.abs(m-d);t=T/2|0,o=d;var N=d<m?1:-1;for(u=p;u<g;u++)_?k(o,u):k(u,o),(t-=D)<0&&(o+=N,t+=T);return{line:S,min:C,max:A}},Rn.toBinaryLine=function(n){var r,e,t,o,a,u,f=n.min,p=n.max,d=n.line,g=f+(p-f)/2,m=[],_=(p-f)/12,S=-_;for(t=d[0]>g?An.UP:An.DOWN,m.push({pos:0,val:d[0]}),a=0;a<d.length-2;a++)t!==(o=(r=d[a+1]-d[a])+(e=d[a+2]-d[a+1])<S&&d[a+1]<1.5*g?An.DOWN:r+e>_&&d[a+1]>.5*g?An.UP:t)&&(m.push({pos:a,val:d[a]}),t=o);for(m.push({pos:d.length,val:d[d.length-1]}),u=m[0].pos;u<m[1].pos;u++)d[u]=d[u]>g?0:1;for(a=1;a<m.length-1;a++)for(_=m[a+1].val>m[a].val?m[a].val+(m[a+1].val-m[a].val)/3*2|0:m[a+1].val+(m[a].val-m[a+1].val)/3|0,u=m[a].pos;u<m[a+1].pos;u++)d[u]=d[u]>_?0:1;return{line:d,threshold:_}},Rn.debug={printFrequency:function(n,r){var e,t=r.getContext("2d");for(r.width=n.length,r.height=256,t.beginPath(),t.strokeStyle="blue",e=0;e<n.length;e++)t.moveTo(e,255),t.lineTo(e,255-n[e]);t.stroke(),t.closePath()},printPattern:function(n,r){var e,t=r.getContext("2d");for(r.width=n.length,t.fillColor="black",e=0;e<n.length;e++)n[e]===1&&t.fillRect(e,0,1,100)}};var En=Rn;function ua(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=(function(p,d){if(p){if(typeof p=="string")return Xt(p,d);var g={}.toString.call(p).slice(8,-1);return g==="Object"&&p.constructor&&(g=p.constructor.name),g==="Map"||g==="Set"?Array.from(p):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?Xt(p,d):void 0}})(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,o=function(){};return{s:o,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,u=!0,f=!1;return{s:function(){e=e.call(n)},n:function(){var p=e.next();return u=p.done,p},e:function(p){f=!0,a=p},f:function(){try{u||e.return==null||e.return()}finally{if(f)throw a}}}}function Xt(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=Array(r);e<r;e++)t[e]=n[e];return t}var pn={code_128_reader:Mt,ean_reader:Le,ean_5_reader:Bt,ean_2_reader:zt,ean_8_reader:Nt,code_39_reader:Mn,code_39_vin_reader:Et,codabar_reader:St,upc_reader:Ht,upc_e_reader:Gt,i2of5_reader:Ut,"2of5_reader":Ot,code_93_reader:Pt,code_32_reader:At,pharmacode_reader:Xn},Qn={registerReader:function(n,r){pn[n]=r},create:function(n,r){var e={frequency:null,pattern:null,overlay:null},t=[];function o(){n.readers.forEach(function(d){var g,m={},_=[];b()(d)==="object"?(g=d.format,m=d.config):typeof d=="string"&&(g=d),m.supplements&&(_=m.supplements.map(function(O){return new pn[O]}));try{var S=new pn[g](m,_);t.push(S)}catch(O){throw console.error("* Error constructing reader ",g,O),O}})}function a(d){var g,m=null,_=En.getBarcodeLine(r,d[0],d[1]);En.toBinaryLine(_);var S=-1;for(g=0;g<t.length&&m===null;g++)typeof t[g].setImageWrapper=="function"&&t[g].setImageWrapper(r),(m=t[g].decodePattern(_.line))!==null&&(S=g);return m===null||S>=0&&t[S]instanceof Xn&&!(function(O,w,C,A){var k=Math.round(O[1].y),T=w.start,D=C.constructor,N=D&&D.adjacentLineValidationMatches||0;if(N<=0)return!0;for(var q=0,U=!1,H=0,we=[1,2,3];H<we.length;H++){var Ue=we[H];if(U)break;for(var ae=0,cn=[-1,1];ae<cn.length;ae++){var sn=cn[ae];if(U)break;var Ee=k+Ue*sn;if(!(Ee<0||Ee>=A.size.y)){var Ge={x:O[0].x,y:Ee},He={x:O[1].x,y:Ee};try{var J=En.getBarcodeLine(A,Ge,He);En.toBinaryLine(J),C._row=J.line;var Oe=C._findStart();if(Oe!==null&&Oe.start===T&&++q>=N){U=!0;break}}catch{}}}}return q>=N})(d,m,t[S],r)?null:{codeResult:m,barcodeLine:_}}function u(d){return f.apply(this,arguments)}function f(){return(f=ze()(ce.a.mark(function d(g){var m,_,S,O,w;return ce.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:m=null,_=ua(t),C.prev=1,_.s();case 2:if((S=_.n()).done){C.next=5;break}if(!(O=S.value).decodeImage){C.next=4;break}return C.next=3,O.decodeImage(g);case 3:if(!(m=C.sent)){C.next=4;break}return C.abrupt("continue",5);case 4:C.next=2;break;case 5:C.next=7;break;case 6:C.prev=6,w=C.catch(1),_.e(w);case 7:return C.prev=7,_.f(),C.finish(7);case 8:return C.abrupt("return",m);case 9:case"end":return C.stop()}},d,null,[[1,6,7,8]])}))).apply(this,arguments)}function p(d){var g,m;e.overlay;var _=(function(O){return Math.sqrt(Math.pow(Math.abs(O[1].y-O[0].y),2)+Math.pow(Math.abs(O[1].x-O[0].x),2))})(g=(function(O){return[{x:(O[1][0]-O[0][0])/2+O[0][0],y:(O[1][1]-O[0][1])/2+O[0][1]},{x:(O[3][0]-O[2][0])/2+O[2][0],y:(O[3][1]-O[2][1])/2+O[2][1]}]})(d)),S=Math.atan2(g[1].y-g[0].y,g[1].x-g[0].x);return(g=(function(O,w,C){function A(k){var T=k*Math.sin(w),D=k*Math.cos(w);O[0].y-=T,O[0].x-=D,O[1].y+=T,O[1].x+=D}for(A(C);C>1&&(!r.inImageWithBorder(O[0])||!r.inImageWithBorder(O[1]));)A(-(C-=Math.ceil(C/2)));return O})(g,S,Math.floor(.1*_)))===null?null:((m=a(g))===null&&(m=(function(O,w,C){var A,k,T,D=Math.sqrt(Math.pow(O[1][0]-O[0][0],2)+Math.pow(O[1][1]-O[0][1],2)),N=null,q=Math.sin(C),U=Math.cos(C);for(A=1;A<16&&N===null;A++)T={y:(k=D/16*A*(A%2==0?-1:1))*q,x:k*U},w[0].y+=T.x,w[0].x-=T.y,w[1].y+=T.x,w[1].x-=T.y,N=a(w);return N})(d,g,S)),m===null?null:{codeResult:m.codeResult,line:g,angle:S,pattern:m.barcodeLine.line,threshold:m.barcodeLine.threshold})}return o(),{decodeFromBoundingBox:function(d){return p(d)},decodeFromBoundingBoxes:function(d){var g,m,_=[],S=n.multiple;for(g=0;g<d.length;g++){var O=d[g];if((m=p(O)||{}).box=O,S)_.push(m);else if(m.codeResult)return m}return{barcodes:_}},decodeFromImage:function(d){return ze()(ce.a.mark(function g(){var m;return ce.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=1,u(d);case 1:return m=_.sent,_.abrupt("return",m);case 2:case"end":return _.stop()}},g)}))()},registerReader:function(d,g){if(pn[d])throw new Error("cannot register existing reader",d);pn[d]=g},setReaders:function(d){n.readers=d,t.length=0,o()}}}},$e=(function(){var n={};function r(o){return n[o]||(n[o]={subscribers:[]}),n[o]}function e(o,a){o.async?setTimeout(function(){o.callback(a)},4):o.callback(a)}function t(o,a,u){var f;if(typeof a=="function")f={callback:a,async:u};else if(!(f=a).callback)throw new Error("Callback was not specified on options");r(o).subscribers.push(f)}return{subscribe:function(o,a,u){return t(o,a,u)},publish:function(o,a){var u=r(o),f=u.subscribers;f.filter(function(p){return!!p.once}).forEach(function(p){e(p,a)}),u.subscribers=f.filter(function(p){return!p.once}),u.subscribers.forEach(function(p){e(p,a)})},once:function(o,a){var u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];t(o,{callback:a,async:u,once:!0})},unsubscribe:function(o,a){if(o){var u=r(o);u.subscribers=u&&a?u.subscribers.filter(function(f){return f.callback!==a}):[]}else n={}}}})(),ca=i(81),sa=i.n(ca),la=i(82),fa=i.n(la),da=i(83);function ha(n,r,e){return r=X()(r),he()(n,(function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(function(){return!!t})()})()?Reflect.construct(r,e||[],X()(n).constructor):r.apply(n,e))}var $n=(function(n){function r(e,t){var o;return I()(this,r),o=ha(this,r,[e]),R()(o,"code",void 0),o.code=t,Object.setPrototypeOf(o,r.prototype),o}return ve()(r,n),z()(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,code:this.code}}}])})(i.n(da)()(Error)),Qt="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function pa(){try{return navigator.mediaDevices.enumerateDevices()}catch{var n=new $n("enumerateDevices is not defined. ".concat(Qt),-1);return Promise.reject(n)}}function $t(n){try{return navigator.mediaDevices.getUserMedia(n)}catch{var r=new $n("getUserMedia is not defined. ".concat(Qt),-1);return Promise.reject(r)}}var Ze,va=["deviceId"];function Zt(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,t)}return e}function Yt(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Zt(Object(e),!0).forEach(function(t){R()(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Zt(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function ga(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=(function(p,d){if(p){if(typeof p=="string")return Kt(p,d);var g={}.toString.call(p).slice(8,-1);return g==="Object"&&p.constructor&&(g=p.constructor.name),g==="Map"||g==="Set"?Array.from(p):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?Kt(p,d):void 0}})(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,o=function(){};return{s:o,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,u=!0,f=!1;return{s:function(){e=e.call(n)},n:function(){var p=e.next();return u=p.done,p},e:function(p){f=!0,a=p},f:function(){try{u||e.return==null||e.return()}finally{if(f)throw a}}}}function Kt(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=Array(r);e<r;e++)t[e]=n[e];return t}function ma(n){return new Promise(function(r,e){var t=10;(function o(){t>0?n.videoWidth>10&&n.videoHeight>10?r():window.setTimeout(o,500):e(new $n("Unable to play video stream. Is webcam working?",-1)),t--})()})}function ya(n,r){return Jt.apply(this,arguments)}function Jt(){return(Jt=ze()(ce.a.mark(function n(r,e){var t;return ce.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=1,$t(e);case 1:if(t=o.sent,Ze=t,!r){o.next=2;break}return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r.srcObject=t,r.addEventListener("loadedmetadata",function(){r.play().catch(function(a){console.warn("* Error while trying to play video stream:",a)})}),o.abrupt("return",ma(r));case 2:return o.abrupt("return",Promise.resolve());case 3:case"end":return o.stop()}},n)}))).apply(this,arguments)}function er(n){var r=fa()(n,["facing","minAspectRatio","maxAspectRatio"]);return n.minAspectRatio!==void 0&&n.minAspectRatio>0&&(r.aspectRatio=n.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),n.facing!==void 0&&(r.facingMode=n.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),r}function xa(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=er(n);return r&&r.deviceId&&r.facingMode&&delete r.facingMode,Promise.resolve({audio:!1,video:r})}function nr(){return(nr=ze()(ce.a.mark(function n(r){var e,t,o,a,u,f,p,d,g,m;return ce.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=1,pa();case 1:if(e=_.sent,t=e.filter(function(S){return S.kind==="videoinput"}),r){_.next=2;break}return _.abrupt("return",t);case 2:o=[],a=er(r),a.deviceId,u=sa()(a,va),f=ga(t),_.prev=3,f.s();case 4:if((p=f.n()).done){_.next=9;break}return d=p.value,_.prev=5,g={audio:!1,video:Yt(Yt({},u),{},{deviceId:{exact:d.deviceId}})},_.next=6,$t(g);case 6:_.sent.getTracks().forEach(function(S){return S.stop()}),o.push(d),_.next=8;break;case 7:_.prev=7,_.catch(5);case 8:_.next=4;break;case 9:_.next=11;break;case 10:_.prev=10,m=_.catch(3),f.e(m);case 11:return _.prev=11,f.f(),_.finish(11);case 12:return _.abrupt("return",o);case 13:case"end":return _.stop()}},n,null,[[3,10,11,12],[5,7]])}))).apply(this,arguments)}function kn(){if(!Ze)return null;var n=Ze.getVideoTracks();return n&&n!=null&&n.length?n[0]:null}var vn={requestedVideoElement:null,request:function(n,r){return ze()(ce.a.mark(function e(){var t;return ce.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return vn.requestedVideoElement=n,o.next=1,xa(r);case 1:return t=o.sent,o.abrupt("return",ya(n,t));case 2:case"end":return o.stop()}},e)}))()},release:function(){var n=Ze&&Ze.getVideoTracks();return vn.requestedVideoElement!==null&&vn.requestedVideoElement.pause(),new Promise(function(r){setTimeout(function(){n&&n.length&&n.forEach(function(e){return e.stop()}),Ze=null,vn.requestedVideoElement=null,r()},0)})},enumerateVideoDevices:function(n){return nr.apply(this,arguments)},getActiveStream:function(){var n;return(n=Ze)!==null&&n!==void 0?n:null},getActiveStreamLabel:function(){var n=kn();return n?n.label:""},getActiveTrack:kn,disableTorch:function(){return ze()(ce.a.mark(function n(){var r,e;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=kn())){t.next=4;break}return t.prev=1,t.next=2,r.applyConstraints({advanced:[{torch:!1}]});case 2:t.next=4;break;case 3:throw t.prev=3,(e=t.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),e;case 4:case"end":return t.stop()}},n,null,[[1,3]])}))()},enableTorch:function(){return ze()(ce.a.mark(function n(){var r,e;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=kn())){t.next=4;break}return t.prev=1,t.next=2,r.applyConstraints({advanced:[{torch:!0}]});case 2:t.next=4;break;case 3:throw t.prev=3,(e=t.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),e;case 4:case"end":return t.stop()}},n,null,[[1,3]])}))()}},Pn=vn,tr={create:function(n){var r,e=document.createElement("canvas"),t=e.getContext("2d",{willReadFrequently:!!n.willReadFrequently}),o=[],a=(r=n.capacity)!==null&&r!==void 0?r:20,u=n.capture===!0;function f(p){return!!a&&p&&!(function(d,g){return g&&g.some(function(m){return Object.keys(m).every(function(_){return m[_]===d[_]})})})(p,n.blacklist)&&(function(d,g){return typeof g!="function"||g(d)})(p,n.filter)}return{addResult:function(p,d,g){var m={};f(g)&&(a--,m.codeResult=g,u&&(e.width=d.x,e.height=d.y,Ln.drawImage(p,d,t),m.frame=e.toDataURL()),o.push(m))},getResults:function(){return o}}}},_a={inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,canvas:{createOverlay:!0},decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},rr=Math.PI/180,or={};or.create=function(n,r){var e,t={},o=n.getConfig(),a=Fn(n.getRealWidth(),n.getRealHeight()),u=n.getCanvasSize(),f=Fn(n.getWidth(),n.getHeight()),p=n.getTopRight(),d=p.x,g=p.y,m=null,_=null,S=o.willReadFrequently;function O(w,C,A,k,T){var D=Math.floor(k),N=Math.floor(T),q=Math.min(D+1,C-1),U=Math.min(N+1,A-1),H=k-D,we=T-N;return(w[N*C+D]*(1-H)+w[N*C+q]*H)*(1-we)+(w[U*C+D]*(1-H)+w[U*C+q]*H)*we}return(e=r||document.createElement("canvas")).width=u.x,e.height=u.y,m=e.getContext("2d",{willReadFrequently:!!S}),_=new Uint8Array(f.x*f.y),t.attachData=function(w){_=w},t.getData=function(){return _},t.grab=function(){var w=o.halfSample,C=n.getFrame(),A=C,k=0;if(A){if((function(J,Oe,ln){J.width!==Oe.x&&(J.width=Oe.x),J.height!==Oe.y&&(J.height=Oe.y)})(e,u,o.debug),o.type==="ImageStream"&&(A=C.img,C.tags&&C.tags.orientation))switch(C.tags.orientation){case 6:k=90*rr;break;case 8:k=-90*rr}if(k!==0?(m.translate(u.x/2,u.y/2),m.rotate(k),m.drawImage(A,-u.y/2,-u.x/2,u.y,u.x),m.rotate(-k),m.translate(-u.x/2,-u.y/2)):m.drawImage(A,0,0,u.x,u.y),w)(function(J,Oe,ln){for(var Xe,Te=0,Z=Oe.x,pe=Math.floor(J.length/4),Xa=Oe.x/2,mr=0,yr=Oe.x;Z<pe;){for(Xe=0;Xe<Xa;Xe++)ln[mr]=(.299*J[4*Te+0]+.587*J[4*Te+1]+.114*J[4*Te+2]+(.299*J[4*(Te+1)+0]+.587*J[4*(Te+1)+1]+.114*J[4*(Te+1)+2])+(.299*J[4*Z+0]+.587*J[4*Z+1]+.114*J[4*Z+2])+(.299*J[4*(Z+1)+0]+.587*J[4*(Z+1)+1]+.114*J[4*(Z+1)+2]))/4,mr++,Te+=2,Z+=2;Te+=yr,Z+=yr}})(m.getImageData(d,g,f.x,f.y).data,f,_);else{var T=document.createElement("canvas");T.width=a.x,T.height=a.y;var D=T.getContext("2d");k!==0?(D.translate(a.x/2,a.y/2),D.rotate(k),D.drawImage(A,-a.y/2,-a.x/2,a.y,a.x)):D.drawImage(A,0,0,a.x,a.y);var N=D.getImageData(0,0,a.x,a.y).data,q=new Uint8Array(a.x*a.y);Ri(N,q,o);for(var U=new Uint8Array(u.x*u.y),H=a.x/u.x,we=a.y/u.y,Ue=0;Ue<u.y;Ue++)for(var ae=0;ae<u.x;ae++){var cn=ae*H,sn=Ue*we;U[Ue*u.x+ae]=0|O(q,a.x,a.y,cn,sn)}for(var Ee=0;Ee<f.y;Ee++)for(var Ge=0;Ge<f.x;Ge++){var He=(Ee+g)*u.x+(Ge+d);_[Ee*f.x+Ge]=U[He]}}return!0}return!1},t.getSize=function(){return f},t};var ba=or,jn={274:"orientation"},ir=Object.keys(jn).map(function(n){return jn[n]});function wa(n){return new Promise(function(r){var e=new FileReader;e.onload=function(t){return r(t.target.result)},e.readAsArrayBuffer(n)})}function Oa(n){return new Promise(function(r,e){var t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onreadystatechange=function(){t.readyState!==XMLHttpRequest.DONE||t.status!==200&&t.status!==0||r(this.response)},t.onerror=e,t.send()})}function Ca(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir,e=new DataView(n),t=n.byteLength,o=r.reduce(function(u,f){var p=Object.keys(jn).filter(function(d){return jn[d]===f})[0];return p&&(u[p]=f),u},{}),a=2;if(e.getUint8(0)!==255||e.getUint8(1)!==216)return!1;for(;a<t;){if(e.getUint8(a)!==255)return!1;if(e.getUint8(a+1)===225)return Sa(e,a+4,o);a+=2+e.getUint16(a+2)}return!1}function Sa(n,r,e){if((function(u,f,p){for(var d="",g=f;g<f+p;g++)d+=String.fromCharCode(u.getUint8(g));return d})(n,r,4)!=="Exif")return!1;var t,o=r+6;if(n.getUint16(o)===18761)t=!1;else{if(n.getUint16(o)!==19789)return!1;t=!0}if(n.getUint16(o+2,!t)!==42)return!1;var a=n.getUint32(o+4,!t);return!(a<8)&&(function(u,f,p,d,g){for(var m=u.getUint16(p,!g),_={},S=0;S<m;S++){var O=p+12*S+2,w=d[u.getUint16(O,!g)];w&&(_[w]=Ma(u,O,f,p,g))}return _})(n,o,o+a,e,t)}function Ma(n,r,e,t,o){var a=n.getUint16(r+2,!o),u=n.getUint32(r+4,!o);switch(a){case 3:if(u===1)return n.getUint16(r+8,!o)}return null}function Ra(n,r){return"".concat(n,"image-").concat(r.toString().padStart(3,"0"),".jpg")}var ar={};function Aa(n,r){n.onload=function(){r.loaded(this)},n.onerror=function(){r.loaded(this)}}ar.load=function(n,r,e,t,o,a){var u,f,p,d=new Array(t),g=new Array(d.length);if(o===!1)d[0]=n;else for(u=0;u<d.length;u++)p=e+u,d[u]=Ra(n,p);for(g.notLoaded=[],g.addImage=function(m){g.notLoaded.push(m)},g.loaded=function(m){for(var _=g.notLoaded,S=0;S<_.length;S++)if(_[S]===m){_.splice(S,1);for(var O=0;O<d.length;O++){var w=encodeURI(d[O].substr(d[O].lastIndexOf("/")));if(m.src.lastIndexOf(w)!==-1){g[O]={img:m};break}}break}_.length===0&&(o===!1?(function(C){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir;return/^blob:/i.test(C)?Oa(C).then(wa).then(function(k){return Ca(k,A)}):Promise.resolve(null)})(n,["orientation"]).then(function(C){g[0].tags=C,r(g)}).catch(function(C){console.log(C),r(g)}):r(g))},u=0;u<d.length;u++)f=new Image,g.addImage(f),Aa(f,g),f.src=d[u]};var Ea=ar,ur={createVideoStream:function(n){console.warn("**** InputStreamBrowser createVideoStream");var r,e,t=null,o=["canrecord","ended"],a={},u={x:0,y:0,type:"Point"},f={x:0,y:0,type:"XYSize"},p={getRealWidth:function(){return n.videoWidth},getRealHeight:function(){return n.videoHeight},getWidth:function(){return r},getHeight:function(){return e},setWidth:function(d){r=d},setHeight:function(d){e=d},setInputStream:function(d){t=d,this.setAttribute("src",d.src!==void 0?d.src:"")},ended:function(){return n.ended},getConfig:function(){return t},setAttribute:function(d,g){n&&n.setAttribute(d,g)},pause:function(){n.pause()},play:function(){n.play()},setCurrentTime:function(d){var g;((g=t)===null||g===void 0?void 0:g.type)!=="LiveStream"&&this.setAttribute("currentTime",d.toString())},addEventListener:function(d,g,m){o.indexOf(d)!==-1?(a[d]||(a[d]=[]),a[d].push(g)):n.addEventListener(d,g,m)},clearEventHandlers:function(){o.forEach(function(d){var g=a[d];g&&g.length>0&&g.forEach(function(m){n.removeEventListener(d,m)})})},trigger:function(d,g){var m,_,S,O,w,C=a[d];if(d==="canrecord"&&(O=n.videoWidth,w=n.videoHeight,r=(_=t)!==null&&_!==void 0&&_.size?O/w>1?t.size:Math.floor(O/w*t.size):O,e=(S=t)!==null&&S!==void 0&&S.size?O/w>1?Math.floor(w/O*t.size):t.size:w,f.x=r,f.y=e),C&&C.length>0)for(m=0;m<C.length;m++)C[m].apply(p,g)},setTopRight:function(d){u.x=d.x,u.y=d.y},getTopRight:function(){return u},setCanvasSize:function(d){f.x=d.x,f.y=d.y},getCanvasSize:function(){return f},getFrame:function(){return n}};return p},createLiveStream:function(n){console.warn("**** InputStreamBrowser createLiveStream"),n&&n.setAttribute("autoplay","true");var r=ur.createVideoStream(n);return r.ended=function(){return!1},r},createImageStream:function(){var n,r,e=null,t=0,o=0,a=0,u=!0,f=!1,p=null,d=0,g=null,m=!1,_=["canrecord","ended"],S={},O={x:0,y:0,type:"Point"},w={x:0,y:0,type:"XYSize"};function C(k,T){var D,N=S[k];if(N&&N.length>0)for(D=0;D<N.length;D++)N[D].apply(A,T)}var A={trigger:C,getWidth:function(){return n},getHeight:function(){return r},setWidth:function(k){n=k},setHeight:function(k){r=k},getRealWidth:function(){return t},getRealHeight:function(){return o},setInputStream:function(k){var T;e=k,k.sequence===!1?(g=k.src,d=1):(g=k.src,d=k.length),f=!1,Ea.load(g,function(D){var N,q;if(p=D,D[0].tags&&D[0].tags.orientation)switch(D[0].tags.orientation){case 6:case 8:t=D[0].img.height,o=D[0].img.width;break;default:t=D[0].img.width,o=D[0].img.height}else t=D[0].img.width,o=D[0].img.height;n=(N=e)!==null&&N!==void 0&&N.size?t/o>1?e.size:Math.floor(t/o*e.size):t,r=(q=e)!==null&&q!==void 0&&q.size?t/o>1?Math.floor(o/t*e.size):e.size:o,w.x=n,w.y=r,f=!0,a=0,setTimeout(function(){C("canrecord",[])},0)},1,d,(T=e)===null||T===void 0?void 0:T.sequence,e)},ended:function(){return m},setAttribute:function(){},getConfig:function(){return e},pause:function(){u=!0},play:function(){u=!1},setCurrentTime:function(k){a=k},addEventListener:function(k,T){_.indexOf(k)!==-1&&(S[k]||(S[k]=[]),S[k].push(T))},clearEventHandlers:function(){Object.keys(S).forEach(function(k){return delete S[k]})},setTopRight:function(k){O.x=k.x,O.y=k.y},getTopRight:function(){return O},setCanvasSize:function(k){w.x=k.x,w.y=k.y},getCanvasSize:function(){return w},getFrame:function(){var k,T;return f?(u||(k=(T=p)===null||T===void 0?void 0:T[a],a<d-1?a++:setTimeout(function(){m=!0,C("ended",[])},0)),k):null}};return A}},ka=ur,Dn={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(n,r){var e,t=n.data,o=r.data,a=this.searchDirections,u=n.size.x;function f(d,g,m,_){var S,O,w;for(S=0;S<a.length;S++){if(O=d.cy+a[d.dir][0],w=d.cx+a[d.dir][1],t[e=O*u+w]===g&&(o[e]===0||o[e]===m))return o[e]=m,d.cy=O,d.cx=w,!0;o[e]===0&&(o[e]=_),d.dir=(d.dir+1)%8}return!1}function p(d,g,m){return{dir:m,x:d,y:g,next:null,prev:null}}return{trace:function(d,g,m,_){return f(d,g,m,_)},contourTracing:function(d,g,m,_,S){return(function(O,w,C,A,k){var T,D,N,q=null,U={cx:w,cy:O,dir:0};if(f(U,A,C,k)){T=q=p(w,O,U.dir),N=U.dir,(D=p(U.cx,U.cy,0)).prev=T,T.next=D,D.next=null,T=D;var H=n.size.x*n.size.y,we=0;do U.dir=(U.dir+6)%8,f(U,A,C,k),N!==U.dir?(T.dir=U.dir,(D=p(U.cx,U.cy,0)).prev=T,T.next=D,D.next=null,T=D):(T.dir=N,T.x=U.cx,T.y=U.cy),N=U.dir;while((U.cx!==w||U.cy!==O)&&++we<H);q.prev=T.prev,T.prev.next=q}return q})(d,g,m,_,S)}}}},ye={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(n,r){var e=n.data,t=r.data,o=n.size.x,a=n.size.y,u=Dn.create(n,r);return{rasterize:function(f){var p,d,g,m,_,S,O,w,C,A,k,T,D=[],N=0;for(T=0;T<400;T++)D[T]=0;for(D[0]=e[0],C=null,S=1;S<a-1;S++)for(m=0,d=D[0],_=1;_<o-1;_++)if(t[k=S*o+_]===0)if((p=e[k])!==d){if(m===0)D[g=N+1]=p,d=p,(O=u.contourTracing(S,_,g,p,ye.DIR.OUTSIDE_EDGE))!==null&&(N++,m=g,(w=ye.createContour2D()).dir=ye.CONTOUR_DIR.CW_DIR,w.index=m,w.firstVertex=O,w.nextpeer=C,w.insideContours=null,C!==null&&(C.prevpeer=w),C=w);else if((O=u.contourTracing(S,_,ye.DIR.INSIDE_EDGE,p,m))!==null){for((w=ye.createContour2D()).firstVertex=O,w.insideContours=null,w.dir=f===0?ye.CONTOUR_DIR.CCW_DIR:ye.CONTOUR_DIR.CW_DIR,w.index=f,A=C;A!==null&&A.index!==m;)A=A.nextpeer;A!==null&&(w.nextpeer=A.insideContours,A.insideContours!==null&&(A.insideContours.prevpeer=w),A.insideContours=w)}}else t[k]=m;else t[k]===ye.DIR.OUTSIDE_EDGE||t[k]===ye.DIR.INSIDE_EDGE?(m=0,d=t[k]===ye.DIR.INSIDE_EDGE?e[k]:D[0]):d=D[m=t[k]];for(A=C;A!==null;)A.index=f,A=A.nextpeer;return{cc:C,count:N}},debug:{drawContour:function(f,p){var d,g,m,_=f.getContext("2d"),S=p;for(_.strokeStyle="red",_.fillStyle="red",_.lineWidth=1,d=S!==null?S.insideContours:null;S!==null;){switch(d!==null?(g=d,d=d.nextpeer):(g=S,d=(S=S.nextpeer)!==null?S.insideContours:null),g.dir){case ye.CONTOUR_DIR.CW_DIR:_.strokeStyle="red";break;case ye.CONTOUR_DIR.CCW_DIR:_.strokeStyle="blue";break;case ye.CONTOUR_DIR.UNKNOWN_DIR:_.strokeStyle="green"}m=g.firstVertex,_.beginPath(),_.moveTo(m.x,m.y);do m=m.next,_.lineTo(m.x,m.y);while(m!==g.firstVertex);_.stroke()}}}}}},Pa=ye;var Ye,Ne,Zn,Pe,Tn,an,se,Ve,je,ge,gn,cr,ja=function(n,r,e){var t=new n.Uint8Array(e),o=r.size|0,a=n.Math.imul;function u(w,C){w=w|0,C=C|0;var A=0,k=0,T=0,D=0,N=0,q=0,U=0,H=0;for(A=1;(A|0)<(o-1|0);A=A+1|0)for(H=H+o|0,k=1;(k|0)<(o-1|0);k=k+1|0)D=H-o|0,N=H+o|0,q=k-1|0,U=k+1|0,T=(t[w+D+q|0]|0)+(t[w+D+U|0]|0)+(t[w+H+k|0]|0)+(t[w+N+q|0]|0)+(t[w+N+U|0]|0)|0,(T|0)==5?t[C+H+k|0]=1:t[C+H+k|0]=0}function f(w,C,A){w=w|0,C=C|0,A=A|0;var k=0;for(k=a(o,o)|0;(k|0)>0;)k=k-1|0,t[A+k|0]=(t[w+k|0]|0)-(t[C+k|0]|0)|0}function p(w,C,A){w=w|0,C=C|0,A=A|0;var k=0;for(k=a(o,o)|0;(k|0)>0;)k=k-1|0,t[A+k|0]=t[w+k|0]|0|(t[C+k|0]|0)|0}function d(w){w=w|0;var C=0,A=0;for(A=a(o,o)|0;(A|0)>0;)A=A-1|0,C=(C|0)+(t[w+A|0]|0)|0;return C|0}function g(w,C){w=w|0,C=C|0;var A=0;for(A=a(o,o)|0;(A|0)>0;)A=A-1|0,t[w+A|0]=C}function m(w,C){w=w|0,C=C|0;var A=0,k=0,T=0,D=0,N=0,q=0,U=0,H=0;for(A=1;(A|0)<(o-1|0);A=A+1|0)for(H=H+o|0,k=1;(k|0)<(o-1|0);k=k+1|0)D=H-o|0,N=H+o|0,q=k-1|0,U=k+1|0,T=(t[w+D+q|0]|0)+(t[w+D+U|0]|0)+(t[w+H+k|0]|0)+(t[w+N+q|0]|0)+(t[w+N+U|0]|0)|0,(T|0)>0?t[C+H+k|0]=1:t[C+H+k|0]=0}function _(w,C){w=w|0,C=C|0;var A=0;for(A=a(o,o)|0;(A|0)>0;)A=A-1|0,t[C+A|0]=t[w+A|0]|0}function S(w){w=w|0;var C=0,A=0;for(C=0;(C|0)<(o-1|0);C=C+1|0)t[w+C|0]=0,t[w+A|0]=0,A=A+o-1|0,t[w+A|0]=0,A=A+1|0;for(C=0;(C|0)<(o|0);C=C+1|0)t[w+A|0]=0,A=A+1|0}function O(){var w=0,C=0,A=0,k=0,T=0,D=0;C=a(o,o)|0,A=C+C|0,k=A+C|0,g(k,0),S(w);do u(w,C),m(C,A),f(w,A,A),p(k,A,k),_(C,w),T=d(w)|0,D=(T|0)==0|0;while(!D)}return{skeletonize:O}},un={ctx:{binary:null},dom:{binary:null}},Ke={x:0,y:0};function Da(n){var r,e,t,o,a,u,f,p=je.size.x,d=je.size.y,g=-je.size.x,m=-je.size.y;for(r=0,e=0;e<n.length;e++)r+=(o=n[e]).rad;for((r=(180*(r/=n.length)/Math.PI+90)%180-90)<0&&(r+=180),r=(180-r)*Math.PI/180,a=l.copy(l.create(),[Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r)]),e=0;e<n.length;e++)for(o=n[e],t=0;t<4;t++)s.transformMat2(o.box[t],o.box[t],a);for(e=0;e<n.length;e++)for(o=n[e],t=0;t<4;t++)o.box[t][0]<p&&(p=o.box[t][0]),o.box[t][0]>g&&(g=o.box[t][0]),o.box[t][1]<d&&(d=o.box[t][1]),o.box[t][1]>m&&(m=o.box[t][1]);for(u=[[p,d],[g,d],[g,m],[p,m]],f=Ye.halfSample?2:1,a=l.invert(a,a),t=0;t<4;t++)s.transformMat2(u[t],u[t],a);for(t=0;t<4;t++)s.scale(u[t],u[t],f);return u}function Ta(n){var r=(function(a,u,f){var p,d,g,m,_=0,S=0,O=[];for(p=0;p<u;p++)O[p]={score:0,item:null};for(p=0;p<a.length;p++)if((d=f.apply(this,[a[p]]))>S)for((g=O[_]).score=d,g.item=a[p],S=Number.MAX_VALUE,m=0;m<u;m++)O[m].score<S&&(S=O[m].score,_=m);return O})((function(a,u,f){var p,d,g,m,_=[];function S(O){var w=!1;for(d=0;d<_.length;d++)(g=_[d]).fits(O)&&(g.add(O),w=!0);return w}for(f||(f="rad"),p=0;p<a.length;p++)S(m=Ci(a[p],p,f))||_.push(Oi(m,u));return _})(n,.9),1,function(a){return a.getPoints().length}),e=[],t=[];if(r.length===1){e=r[0].item.getPoints();for(var o=0;o<e.length;o++)t.push(e[o].point)}return t}function Ia(n,r){je.subImageAsCopy(Pe,Fn(n,r)),cr.skeletonize()}function za(n,r,e,t){var o,a,u,f,p=[],d=[],g=Math.ceil(ge.x/3);if(n.length>=2){for(o=0;o<n.length;o++)n[o].m00>g&&p.push(n[o]);if(p.length>=2){for(u=Ta(p),a=0,o=0;o<u.length;o++){var m,_;a+=(m=(_=u[o])===null||_===void 0?void 0:_.rad)!==null&&m!==void 0?m:0}u.length>1&&u.length>=p.length/4*3&&u.length>n.length/4&&(a/=u.length,f={index:r[1]*Ke.x+r[0],pos:{x:e,y:t},box:[s.clone([e,t]),s.clone([e+Pe.size.x,t]),s.clone([e+Pe.size.x,t+Pe.size.y]),s.clone([e,t+Pe.size.y])],moments:u,rad:a,vec:s.clone([Math.cos(a),Math.sin(a)])},d.push(f))}}return d}var Ba=function(n,r){Ye=r,gn=n,(function(){Ne=Ye.halfSample?new Ae({x:gn.size.x/2|0,y:gn.size.y/2|0}):gn,ge=mt(Ye.patchSize,Ne.size),Ke.x=Ne.size.x/ge.x|0,Ke.y=Ne.size.y/ge.y|0,je=new Ae(Ne.size,void 0,Uint8Array,!1),Tn=new Ae(ge,void 0,Array,!0);var e=ge.x*ge.y*4,t=Math.max(65536,Math.pow(2,Math.ceil(Math.log2(e)))),o=new ArrayBuffer(t);Pe=new Ae(ge,new Uint8Array(o,0,ge.x*ge.y)),Zn=new Ae(ge,new Uint8Array(o,ge.x*ge.y*3,ge.x*ge.y),void 0,!0),cr=ja({Math,Uint8Array},{size:ge.x},o),Ve=new Ae({x:Ne.size.x/Pe.size.x|0,y:Ne.size.y/Pe.size.y|0},void 0,Array,!0),an=new Ae(Ve.size,void 0,void 0,!0),se=new Ae(Ve.size,void 0,Int32Array,!0)})(),(function(){if(!Ye.useWorker&&typeof document<"u"){un.dom.binary=document.createElement("canvas"),un.dom.binary.className="binaryBuffer";var e=!!Ye.willReadFrequently;un.ctx.binary=un.dom.binary.getContext("2d",{willReadFrequently:e}),un.dom.binary.width=je.size.x,un.dom.binary.height=je.size.y}})()},Na=function(){Ye.halfSample&&(function(t,o){for(var a=t.data,u=t.size.x,f=o.data,p=0,d=u,g=a.length,m=u/2,_=0;d<g;){for(var S=0;S<m;S++)f[_]=Math.floor((a[p]+a[p+1]+a[d]+a[d+1])/4),_++,p+=2,d+=2;p+=u,d+=u}})(gn,Ne),Mi(Ne,je),je.zeroBorder();var n=(function(){var t,o,a,u,f,p,d=[];for(t=0;t<Ke.x;t++)for(o=0;o<Ke.y;o++)Ia(a=Pe.size.x*t,u=Pe.size.y*o),Zn.zeroBorder(),on(Tn.data,0),p=Pa.create(Zn,Tn).rasterize(0),f=Tn.moments(p.count),d=d.concat(za(f,[t,o],a,u));return d})();if(n.length<Ke.x*Ke.y*.05)return null;var r=(function(t){var o,a,u=0,f=0;function p(){var g;for(g=0;g<se.data.length;g++)if(se.data[g]===0&&an.data[g]===1)return g;return se.data.length}function d(g){var m,_,S,O,w,C=g%se.size.x,A=g/se.size.x|0;if(g<se.data.length)for(S=Ve.data[g],se.data[g]=u,w=0;w<Dn.searchDirections.length;w++)_=A+Dn.searchDirections[w][0],m=C+Dn.searchDirections[w][1],O=_*se.size.x+m,an.data[O]!==0?se.data[O]===0&&Math.abs(s.dot(Ve.data[O].vec,S.vec))>.95&&d(O):se.data[O]=Number.MAX_VALUE}for(on(an.data,0),on(se.data,0),on(Ve.data,null),o=0;o<t.length;o++)a=t[o],Ve.data[a.index]=a,an.data[a.index]=1;for(an.zeroBorder();(f=p())<se.data.length;)u++,d(f);return u})(n);if(r<1)return null;var e=(function(t){var o,a,u=[];for(o=0;o<t;o++)u.push(0);for(a=se.data.length;a--;)se.data[a]>0&&u[se.data[a]-1]++;return(u=u.map(function(f,p){return{val:f,label:p+1}})).sort(function(f,p){return p.val-f.val}),u.filter(function(f){return f.val>=5})})(r);return e.length===0?null:(function(t,o){var a,u,f,p,d=[],g=[];for(a=0;a<t.length;a++){for(u=se.data.length,d.length=0;u--;)se.data[u]===t[a].label&&(f=Ve.data[u],d.push(f));(p=Da(d))&&g.push(p)}return g})(e)},Ua=function(n,r){var e,t,o=n.getWidth(),a=n.getHeight(),u=r.halfSample?.5:1;n.getConfig().area&&(t=Ei(o,a,n.getConfig().area),n.setTopRight({x:t.sx,y:t.sy}),n.setCanvasSize({x:o,y:a}),o=t.sw,a=t.sh);var f={x:Math.floor(o*u),y:Math.floor(a*u)};if(e=mt(r.patchSize,f),n.setWidth(Math.max(Math.floor(Math.floor(f.x/e.x)*(1/u)*e.x),e.x)),n.setHeight(Math.max(Math.floor(Math.floor(f.y/e.y)*(1/u)*e.y),e.y)),n.getWidth()%e.x==0&&n.getHeight()%e.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(o," )and height (").concat(a,") must a multiple of ").concat(e.x))},Fa=z()(function n(){I()(this,n),R()(this,"config",void 0),R()(this,"inputStream",void 0),R()(this,"framegrabber",void 0),R()(this,"inputImageWrapper",void 0),R()(this,"stopped",!1),R()(this,"initAborted",!1),R()(this,"boxSize",void 0),R()(this,"resultCollector",void 0),R()(this,"decoder",void 0),R()(this,"workerPool",[]),R()(this,"onUIThread",!0),R()(this,"canvasContainer",new Wa)}),sr=z()(function n(){I()(this,n),R()(this,"image",void 0),R()(this,"overlay",void 0)}),Wa=z()(function n(){I()(this,n),R()(this,"ctx",void 0),R()(this,"dom",void 0),this.ctx=new sr,this.dom=new sr});function lr(n){if(typeof document>"u")return null;if(n instanceof HTMLElement&&n.nodeName&&n.nodeType===1)return n;var r=typeof n=="string"?n:"#interactive.viewport";return document.querySelector(r)}function fr(n,r,e){var t=(function(a,u){var f=document.querySelector(a);return f||((f=document.createElement("canvas")).className=u),f})(n,r),o=t.getContext("2d",{willReadFrequently:e.willReadFrequently});return{canvas:t,context:o}}function La(n){var r,e,t,o,a,u,f,p,d,g,m=lr(n==null||(r=n.config)===null||r===void 0||(e=r.inputStream)===null||e===void 0?void 0:e.target),_=n==null||(t=n.config)===null||t===void 0||(o=t.inputStream)===null||o===void 0?void 0:o.type;if(!_)return null;var S=(n==null||(a=n.config)===null||a===void 0||(u=a.canvas)===null||u===void 0?void 0:u.createOverlay)!==!1,O=(function(C,A){var k=A.willReadFrequently,T=A.createOverlay,D=A.debug;if(typeof document<"u"){var N=fr("canvas.imgBuffer","imgBuffer",{willReadFrequently:k,debug:D});N.canvas.width=C.x,N.canvas.height=C.y;var q={canvas:null,context:null};if(T){var U=fr("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:k,debug:D});U.canvas.width=C.x,U.canvas.height=C.y,q=U}return{dom:{image:N.canvas,overlay:q.canvas},ctx:{image:N.context,overlay:q.context}}}return null})(n.inputStream.getCanvasSize(),{willReadFrequently:!(n==null||(f=n.config)===null||f===void 0||(p=f.inputStream)===null||p===void 0||!p.willReadFrequently),createOverlay:S,debug:n==null||(d=n.config)===null||d===void 0||(g=d.locator)===null||g===void 0?void 0:g.debug});if(!O)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var w=O.dom;return typeof document<"u"&&m&&(_!=="ImageStream"||m.contains(w.image)||m.appendChild(w.image),w.overlay&&!m.contains(w.overlay)&&m.appendChild(w.overlay)),O}function dr(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,t)}return e}function In(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?dr(Object(e),!0).forEach(function(t){R()(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):dr(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var De=[];function Va(n){return In(In({},n),{},{inputStream:In(In({},n.inputStream),{},{target:null})})}function qa(n){if(n){var r=n().default;if(!r)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var e;function t(a){self.postMessage({event:"processed",imageData:e.data,result:a},[e.data.buffer])}function o(){self.postMessage({event:"initialized",imageData:e.data},[e.data.buffer])}self.onmessage=function(a){if(a.data.cmd==="init"){var u=a.data.config;u.numOfWorkers=0,e=new r.ImageWrapper({x:a.data.size.x,y:a.data.size.y},new Uint8Array(a.data.imageData)),r.init(u,o,e),r.onProcessed(t)}else a.data.cmd==="process"?(e.data=new Uint8Array(a.data.imageData),r.start()):a.data.cmd==="setReaders"?r.setReaders(a.data.readers):a.data.cmd==="registerReader"&&r.registerReader(a.data.name,a.data.reader)}}function Ga(n,r,e){var t,o,a=(typeof __factorySource__<"u"&&(o=__factorySource__),t=new Blob(["("+qa.toString()+")("+o+");"],{type:"text/javascript"}),window.URL.createObjectURL(t)),u={worker:new Worker(a),imageData:new Uint8Array(r.getWidth()*r.getHeight()),busy:!0};u.worker.onmessage=function(f){f.data.event==="initialized"?(URL.revokeObjectURL(a),u.busy=!1,u.imageData=new Uint8Array(f.data.imageData),e(u)):f.data.event==="processed"?(u.imageData=new Uint8Array(f.data.imageData),u.busy=!1,typeof publishResult<"u"&&publishResult(f.data.result,u.imageData)):f.data.event},u.worker.postMessage({cmd:"init",size:{x:r.getWidth(),y:r.getHeight()},imageData:u.imageData,config:Va(n)},[u.imageData.buffer])}function hr(n,r,e,t){var o=n-De.length;if(o===0&&t)t();else if(o<0)De.slice(o).forEach(function(f){f.worker.terminate()}),De=De.slice(0,o),t&&t();else{var a=function(f){De.push(f),De.length>=n&&t&&t()};if(r)for(var u=0;u<o;u++)Ga(r,e,a)}}function pr(n,r,e){for(var t=n.length;t--;)n[t][0]+=r,n[t][1]+=e}function Ha(n,r,e){n[0].x+=r,n[0].y+=e,n[1].x+=r,n[1].y+=e}var vr=(function(){return z()(function e(){var t=this;I()(this,e),R()(this,"context",new Fa),R()(this,"canRecord",function(o){var a;t.context.initAborted?o(new Error("Initialization was aborted")):t.context.config?t.context.inputStream?(Ua(t.context.inputStream,(a=t.context.config)===null||a===void 0?void 0:a.locator),t.initCanvas(),t.context.framegrabber=ba.create(t.context.inputStream,t.context.canvasContainer.dom.image),t.context.config.numOfWorkers===void 0&&(t.context.config.numOfWorkers=0),hr(t.context.config.numOfWorkers,t.context.config,t.context.inputStream,function(){var u;((u=t.context.config)===null||u===void 0?void 0:u.numOfWorkers)===0&&t.initializeData(),t.ready(o)})):o(new Error("Input stream not initialized")):o(new Error("Configuration not initialized"))}),R()(this,"update",function(){if(t.context.onUIThread){var o,a=(f=t.context.framegrabber,De.length?!!(p=De.filter(function(d){return!d.busy})[0])&&(f.attachData(p.imageData),f.grab()&&(p.busy=!0,p.worker.postMessage({cmd:"process",imageData:p.imageData},[p.imageData.buffer])),!0):null);a||(t.context.framegrabber.attachData((o=t.context.inputImageWrapper)===null||o===void 0?void 0:o.data),t.context.framegrabber.grab()&&(a||t.locateAndDecode()))}else{var u;t.context.framegrabber.attachData((u=t.context.inputImageWrapper)===null||u===void 0?void 0:u.data),t.context.framegrabber.grab(),t.locateAndDecode()}var f,p}),R()(this,"_cachedStyleValues",void 0),R()(this,"_resolvedStyle",void 0)},[{key:"initBuffers",value:function(e){if(this.context.config){var t=(function(u,f,p){var d=f||new Ae({x:u.getWidth(),y:u.getHeight(),type:"XYSize"}),g=[s.clone([0,0]),s.clone([0,d.size.y]),s.clone([d.size.x,d.size.y]),s.clone([d.size.x,0])];return Ba(d,p),{inputImageWrapper:d,boxSize:g}})(this.context.inputStream,e,this.context.config.locator),o=t.inputImageWrapper,a=t.boxSize;this.context.inputImageWrapper=o,this.context.boxSize=a}}},{key:"initializeData",value:function(e){this.context.config&&(this.initBuffers(e),this.context.decoder=Qn.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?lr(this.context.config.inputStream.target):null}},{key:"ready",value:function(e){this.context.inputStream.play(),e()}},{key:"initCanvas",value:function(){var e=La(this.context);if(e){var t=e.ctx,o=e.dom;this.context.canvasContainer.dom.image=o.image,this.context.canvasContainer.dom.overlay=o.overlay,this.context.canvasContainer.ctx.image=t.image,this.context.canvasContainer.ctx.overlay=t.overlay}}},{key:"initInputStream",value:function(e){if(this.context.config&&this.context.config.inputStream){var t=this.context.config.inputStream,o=t.type,a=t.constraints,u=(function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"LiveStream",g=arguments.length>1?arguments[1]:void 0,m=arguments.length>2?arguments[2]:void 0;switch(d){case"VideoStream":var _=document.createElement("video");return{video:_,inputStream:m.createVideoStream(_)};case"ImageStream":return{inputStream:m.createImageStream()};case"LiveStream":var S=null;return g&&((S=g.querySelector("video"))||(S=document.createElement("video"),g.appendChild(S))),{video:S,inputStream:m.createLiveStream(S)};default:return console.error("* setupInputStream invalid type ".concat(d)),{video:null,inputStream:null}}})(o,this.getViewPort(),ka),f=u.video,p=u.inputStream;o==="LiveStream"&&f&&Pn.request(f,a).then(function(){return p.trigger("canrecord")}).catch(function(d){return e(d)}),p&&(p.setAttribute("preload","auto"),p.setInputStream(this.context.config.inputStream),p.addEventListener("canrecord",this.canRecord.bind(void 0,e))),this.context.inputStream=p}}},{key:"getBoundingBoxes",value:function(){var e;return(e=this.context.config)!==null&&e!==void 0&&e.locate?Na():[[s.clone(this.context.boxSize[0]),s.clone(this.context.boxSize[1]),s.clone(this.context.boxSize[2]),s.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(e){var t=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set,a=this.context.inputStream.getTopRight(),u=a.x,f=a.y;if((u!==0||f!==0)&&(e.barcodes&&e.barcodes.forEach(function(d){return t.transformResult(d,o)}),e.line&&e.line.length===2&&Ha(e.line,u,f),e.box&&!o.has(e.box)&&(pr(e.box,u,f),o.add(e.box)),e.boxes&&e.boxes.length>0))for(var p=0;p<e.boxes.length;p++)o.has(e.boxes[p])||(pr(e.boxes[p],u,f),o.add(e.boxes[p]))}},{key:"addResult",value:function(e,t){var o=this;t&&this.context.resultCollector&&(e.barcodes?e.barcodes.filter(function(a){return a.codeResult}).forEach(function(a){return o.addResult(a,t)}):e.codeResult&&this.context.resultCollector.addResult(t,this.context.inputStream.getCanvasSize(),e.codeResult))}},{key:"hasCodeResult",value:function(e){return!(!e||!(e.barcodes?e.barcodes.some(function(t){return t.codeResult}):e.codeResult))}},{key:"publishResult",value:function(){var e,t,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,u=o;o&&this.context.onUIThread&&(this.transformResult(o),this.addResult(o,a),u=(o==null||(t=o.barcodes)===null||t===void 0?void 0:t.length)>0?o.barcodes:o),$e.publish("processed",u),this.hasCodeResult(o)&&$e.publish("detected",u);var f=this.context.config;f&&f.locate===!1&&(e=f.inputStream)!==null&&e!==void 0&&e.area&&this.drawScannerArea()}},{key:"locateAndDecode",value:(r=ze()(ce.a.mark(function e(){var t,o,a,u,f,p;return ce.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(t=this.getBoundingBoxes())){d.next=3;break}return d.next=1,this.context.decoder.decodeFromBoundingBoxes(t);case 1:if(p=d.sent){d.next=2;break}p={};case 2:(a=p).boxes=t,this.publishResult(a,(o=this.context.inputImageWrapper)===null||o===void 0?void 0:o.data),d.next=5;break;case 3:return d.next=4,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 4:(u=d.sent)?this.publishResult(u,(f=this.context.inputImageWrapper)===null||f===void 0?void 0:f.data):this.publishResult();case 5:case"end":return d.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var e,t=this,o=null,a=1e3/(((e=this.context.config)===null||e===void 0?void 0:e.frequency)||60);this.context.stopped=!1;var u=this.context,f=function(p){o=o||p,u.stopped||(p>=o&&(o+=a,t.update()),window.requestAnimationFrame(f))};f(performance.now())}},{key:"start",value:function(){var e,t;this.context.onUIThread&&((e=this.context.config)===null||e===void 0||(t=e.inputStream)===null||t===void 0?void 0:t.type)==="LiveStream"?this.startContinuousUpdate():this.update()}},{key:"stop",value:(n=ze()(ce.a.mark(function e(){var t,o;return ce.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.context.stopped=!0,this.context.framegrabber||(this.context.initAborted=!0),hr(0),(t=this.context.config)===null||t===void 0||!t.inputStream||this.context.config.inputStream.type!=="LiveStream"){a.next=2;break}return a.next=1,Pn.release();case 1:(o=this.context.inputStream)===null||o===void 0||o.clearEventHandlers();case 2:case"end":return a.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"setReaders",value:function(e){this.context.decoder&&this.context.decoder.setReaders(e),(function(t){De.forEach(function(o){return o.worker.postMessage({cmd:"setReaders",readers:t})})})(e)}},{key:"registerReader",value:function(e,t){Qn.registerReader(e,t),this.context.decoder&&this.context.decoder.registerReader(e,t),(function(o,a){De.forEach(function(u){return u.worker.postMessage({cmd:"registerReader",name:o,reader:a})})})(e,t)}},{key:"drawScannerArea",value:function(){var e,t,o,a=(e=this.context.config)===null||e===void 0||(t=e.inputStream)===null||t===void 0?void 0:t.area;if(a){var u=this.context.canvasContainer.ctx.overlay;if(u&&((o=this.context.config)===null||o===void 0?void 0:o.locate)===!1&&(a.borderColor!==void 0&&a.borderColor!==""||a.borderWidth!==void 0&&a.borderWidth>0||a.backgroundColor!==void 0&&a.backgroundColor!=="")&&this.context.boxSize){var f=this.context.inputStream.getTopRight(),p=f.x,d=f.y,g=this.context.boxSize,m=g[0],_=g[1],S=g[3],O=m[0]+p,w=m[1]+d,C=S[0]-m[0],A=_[1]-m[1];if(!this._cachedStyleValues||this._cachedStyleValues.borderColor!==a.borderColor||this._cachedStyleValues.borderWidth!==a.borderWidth||this._cachedStyleValues.backgroundColor!==a.backgroundColor){var k,T;this._cachedStyleValues={borderColor:a.borderColor,borderWidth:a.borderWidth,backgroundColor:a.backgroundColor};var D=a.borderColor!==void 0||a.borderWidth!==void 0,N=(k=a.borderColor)!==null&&k!==void 0?k:"rgba(0, 255, 0, 0.5)",q=D?(T=a.borderWidth)!==null&&T!==void 0?T:2:0,U=a.backgroundColor;this._resolvedStyle={color:N,width:q,bg:U}}var H=this._resolvedStyle;H.bg&&(u.fillStyle=H.bg,u.fillRect(O,w,C,A)),H.width>0&&(u.strokeStyle=H.color,u.lineWidth=H.width,u.strokeRect(O,w,C,A))}}}}]);var n,r})(),qe=new vr,mn=qe.context,gr={init:function(n,r,e){var t,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:qe;return r||(t=new Promise(function(a,u){r=function(f){f?u(f):a()}})),o.context.initAborted=!1,o.context.config=E()({},_a,n),o.context.config.numOfWorkers>0&&(o.context.config.numOfWorkers=0),e?(o.context.onUIThread=!1,o.initializeData(e),r&&r()):o.initInputStream(r),t},start:function(n,r){var e;if(n)return r||(e=new Promise(function(t,o){r=function(a){a?o(a):t()}})),this.init(n,function(t){if(t)r(t);else try{qe.start(),r()}catch(o){r(o)}}),e;if(!mn.framegrabber)throw new Error("start() was called before init() completed. Call init() first, or call start(config) to combine init and start.");return qe.start()},stop:function(){return qe.stop()},pause:function(){mn.stopped=!0},onDetected:function(n){n&&(typeof n=="function"||b()(n)==="object"&&n.callback)?$e.subscribe("detected",n):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(n){$e.unsubscribe("detected",n)},onProcessed:function(n){n&&(typeof n=="function"||b()(n)==="object"&&n.callback)?$e.subscribe("processed",n):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(n){$e.unsubscribe("processed",n)},setReaders:function(n){n?qe.setReaders(n):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(n,r){n?r?qe.registerReader(n,r):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(n){n&&typeof n.addResult=="function"&&(mn.resultCollector=n)},get canvas(){return mn.canvasContainer},drawScannerArea:function(){return qe.drawScannerArea()},decodeSingle:function(n,r){var e=this,t=new vr;return(n=E()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:n.src},numOfWorkers:1,locator:{halfSample:!1}},n)).numOfWorkers>0&&(n.numOfWorkers=0),n.numOfWorkers>0&&(typeof Blob>"u"||typeof Worker>"u")&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),n.numOfWorkers=0),new Promise(function(o,a){try{e.init(n,function(){mn.canvasContainer=t.context.canvasContainer,$e.once("processed",function(u){t.stop(),r&&r.call(null,u),o(u)},!0),t.start()},null,t)}catch(u){a(u)}})},get default(){return gr},Readers:v,CameraAccess:Pn,ImageDebug:Ln,ImageWrapper:Ae,ResultCollector:tr};y.default=gr}]).default})});var fn=$a(Gr());var Bn=class c{constructor(y){this.ngZone=y}_barcodeDetected$=new xr;_isRunning=!1;_onDetectedHandler=null;barcodeDetected$=this._barcodeDetected$.pipe(_r(500),br((y,i)=>y.code===i.code));async startScanner(y){return this._isRunning&&await this.stopScanner(),new Promise((i,l)=>{fn.default.init({inputStream:{type:"LiveStream",target:y,constraints:{width:{ideal:640},height:{ideal:480},facingMode:"environment"}},decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader"]},locator:{patchSize:"medium",halfSample:!0},locate:!0,frequency:10},s=>{if(s){l(s);return}this._onDetectedHandler=h=>{h?.codeResult?.code&&this.ngZone.run(()=>{this._barcodeDetected$.next({code:h.codeResult.code,format:h.codeResult.format})})},fn.default.onDetected(this._onDetectedHandler),fn.default.start(),this._isRunning=!0,i()})})}async stopScanner(){this._isRunning&&(this._onDetectedHandler&&(fn.default.offDetected(this._onDetectedHandler),this._onDetectedHandler=null),fn.default.stop(),this._isRunning=!1)}get isRunning(){return this._isRunning}static \u0275fac=function(i){return new(i||c)(Or(Cr))};static \u0275prov=wr({token:c,factory:c.\u0275fac,providedIn:"root"})};var Ya=["scannerTarget"],Ka=["brandInput"],Ja=(c,y)=>y.brand;function eu(c,y){if(c&1){let i=_n();ee(0,"button",11),rn("click",function(){Je(i);let s=Se();return en(s.clearBrand())}),ee(1,"mat-icon"),fe(2,"close"),ne()()}}function nu(c,y){if(c&1){let i=_n();ee(0,"div",9)(1,"mat-icon"),fe(2,"videocam_off"),ne(),ee(3,"p"),fe(4),ne(),ee(5,"button",12),rn("click",function(){Je(i);let s=Se();return en(s.startScanning())}),fe(6,"Retry"),ne()()}c&2&&(le(4),bn(y))}function tu(c,y){if(c&1&&(ee(0,"div",14)(1,"span",20),fe(2,"Cheapest:"),ne(),ee(3,"span",21),fe(4),ne(),ee(5,"span",22),fe(6),ne()()),c&2){let i=y,l=Se(2);le(4),wn(" ",l.formatCentsToEuro(i.price.price)," "),le(2),wn("@ ",i.brand)}}function ru(c,y){if(c&1&&(ee(0,"span",26),fe(1),ne()),c&2){let i=Se(3);le(),wn(" ",i.formatCentsToEuro(y.price)," ")}}function ou(c,y){if(c&1&&(ee(0,"span",27),fe(1),ee(2,"small"),fe(3,"(sale)"),ne()()),c&2){let i=Se().$implicit,l=Se(2);le(),wn(" ",l.formatCentsToEuro(i.discountedPrice.price)," ")}}function iu(c,y){if(c&1&&(ee(0,"div",23)(1,"span",24),fe(2),ne(),ee(3,"div",25),nn(4,ru,2,1,"span",26),nn(5,ou,4,1,"span",27),ne()()),c&2){let i,l=y.$implicit,s=Se(2);Jn("highlighted",s.selectedBrand()&&l.brand.toLowerCase()===s.selectedBrand().toLowerCase()),le(2),bn(l.brand),le(2),tn((i=s.getCurrentFullPrice(l))?4:-1,i),le(),tn(l.discountedPrice?5:-1)}}function au(c,y){if(c&1){let i=_n();ee(0,"div",10)(1,"h2"),fe(2),ne(),ee(3,"p",13),fe(4),ne(),nn(5,tu,7,2,"div",14),ee(6,"div",15),Mr(7,iu,6,5,"div",16,Ja),ne(),ee(9,"div",17)(10,"button",18),rn("click",function(){let s=Je(i),h=Se();return en(h.goToProductDetail(s.barcode))}),fe(11," View Details "),ne(),ee(12,"button",19),rn("click",function(){let s=Je(i),h=Se();return en(h.goToUpdatePrice(s.barcode))}),fe(13," Update Price "),ne(),ee(14,"button",19),rn("click",function(){Je(i);let s=Se();return en(s.resumeScanning())}),ee(15,"mat-icon"),fe(16,"qr_code_scanner"),ne(),fe(17," Scan Again "),ne()()()}if(c&2){let i,l=y,s=Se();le(2),bn(l.name),le(2),bn(l.barcode),le(),tn((i=s.getCheapestFullPrice(l))?5:-1,i),le(2),Rr(s.sortSupermarketsCheapestFirst(l.supermarkets))}}var Hr=class c{scanner=yn(Bn);storage=yn(Vr);router=yn(Pr);snackBar=yn(Br);scannerTarget;brandInput;selectedBrand=xn(this.storage.selectedBrand());scannerActive=xn(!1);scannerError=xn(null);scannedProduct=xn(null);scanSubscription=null;formatCentsToEuro=Wr;getCurrentFullPrice=Ur;sortSupermarketsCheapestFirst=Lr;getCheapestFullPrice=Fr;async ngAfterViewInit(){await this.startScanning()}ngOnDestroy(){this.cleanupScanner()}async startScanning(){try{this.scannerError.set(null),this.scannedProduct.set(null),await this.scanner.startScanner(this.scannerTarget.nativeElement),this.scannerActive.set(!0),this.scanSubscription=this.scanner.barcodeDetected$.subscribe(y=>this.handleBarcodeScan(y.code))}catch(y){this.scannerError.set(y?.message?.includes("Permission")?"Camera permission denied. Please allow camera access.":"Could not start camera. Please check permissions."),this.scannerActive.set(!1)}}async handleBarcodeScan(y){await this.scanner.stopScanner(),this.scannerActive.set(!1);let i=this.storage.getProduct(y);i?(this.scannedProduct.set(i),this.snackBar.open(`Found: ${i.name}`,"OK",{duration:2e3})):this.router.navigate(["/product/new",y],{queryParams:{brand:this.selectedBrand()||void 0}})}onBrandPreSelected(y){this.selectedBrand.set(y),y?this.storage.setSelectedBrand(y):this.storage.clearSelectedBrand()}clearBrand(){this.selectedBrand.set(""),this.storage.clearSelectedBrand(),this.brandInput.clear()}goToProductDetail(y){this.router.navigate(["/product",y],{queryParams:{brand:this.selectedBrand()||void 0}})}goToUpdatePrice(y){this.router.navigate(["/product",y,"edit"],{queryParams:{brand:this.selectedBrand()||void 0}})}async resumeScanning(){this.scannedProduct.set(null),await this.startScanning()}cleanupScanner(){this.scanSubscription?.unsubscribe(),this.scanner.stopScanner(),this.scannerActive.set(!1)}static \u0275fac=function(i){return new(i||c)};static \u0275cmp=Sr({type:c,selectors:[["pw-scan"]],viewQuery:function(i,l){if(i&1&&kr(Ya,5)(Ka,5),i&2){let s;Yn(s=Kn())&&(l.scannerTarget=s.first),Yn(s=Kn())&&(l.brandInput=s.first)}},decls:11,vars:6,consts:[["brandInput",""],["scannerTarget",""],[1,"scan-page"],[1,"brand-selector","page-content"],[1,"brand-row"],["label","Shopping at...",3,"brandSelected","initialValue"],["mat-icon-button","","aria-label","Clear brand",1,"clear-brand-btn"],[1,"scanner-viewport"],[1,"scanner-target"],[1,"scanner-error"],[1,"scan-result","page-content"],["mat-icon-button","","aria-label","Clear brand",1,"clear-brand-btn",3,"click"],["mat-flat-button","",3,"click"],[1,"barcode-label"],[1,"cheapest-badge"],[1,"prices-list"],[1,"price-entry",3,"highlighted"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[1,"cheapest-label"],[1,"cheapest-price"],[1,"cheapest-brand"],[1,"price-entry"],[1,"brand-name"],[1,"prices"],[1,"full-price"],[1,"discounted-price"]],template:function(i,l){if(i&1){let s=_n();ee(0,"div",2)(1,"div",3)(2,"div",4)(3,"pw-brand-autocomplete",5,0),rn("brandSelected",function(v){return Je(s),en(l.onBrandPreSelected(v))}),ne(),nn(5,eu,3,0,"button",6),ne()(),ee(6,"div",7),Er(7,"div",8,1),nn(9,nu,7,1,"div",9),ne(),nn(10,au,18,3,"div",10),ne()}if(i&2){let s,h;le(3),Ar("initialValue",l.selectedBrand()),le(2),tn(l.selectedBrand()?5:-1),le(),Jn("hidden",l.scannedProduct()!==null),le(3),tn((s=l.scannerError())?9:-1,s),le(),tn((h=l.scannedProduct())?10:-1,h)}},dependencies:[Tr,Dr,jr,zr,Ir,Nr,qr],styles:[".scan-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.brand-selector[_ngcontent-%COMP%]{padding:12px 16px;flex-shrink:0}.brand-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.brand-row[_ngcontent-%COMP%]   pw-brand-autocomplete[_ngcontent-%COMP%]{flex:1}.clear-brand-btn[_ngcontent-%COMP%]{flex-shrink:0}.scanner-viewport[_ngcontent-%COMP%]{position:relative;flex:1;min-height:200px;overflow:hidden;background:#000}.scanner-viewport.hidden[_ngcontent-%COMP%]{display:none}.scanner-target[_ngcontent-%COMP%]{width:100%;height:100%}.scanner-target[_ngcontent-%COMP%]     video{width:100%;height:100%;object-fit:cover}.scanner-target[_ngcontent-%COMP%]     canvas{position:absolute;top:0;left:0;width:100%;height:100%}.scanner-error[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;color:#fff;background:#000c}.scanner-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.scan-result[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.barcode-label[_ngcontent-%COMP%]{font-family:monospace;color:var(--mat-sys-on-surface-variant)}.cheapest-badge[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px;padding:12px;margin:8px 0;background:var(--mat-sys-primary-container);color:var(--mat-sys-on-primary-container);border-radius:12px}.cheapest-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.prices-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin:16px 0}.price-entry[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:8px;background:var(--mat-sys-surface-container-low)}.price-entry.highlighted[_ngcontent-%COMP%]{background:var(--mat-sys-secondary-container);border-left:4px solid var(--mat-sys-primary)}.discounted-price[_ngcontent-%COMP%]{color:var(--mat-sys-error);font-weight:500;margin-left:8px}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:16px}"]})};export{Hr as Scan};
