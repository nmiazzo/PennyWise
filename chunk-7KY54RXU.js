import{g as R,i as G,j as V,l as X,m as q,n as J,o as K}from"./chunk-FJULVGZ5.js";import"./chunk-ZOF3TQ34.js";import{d as N}from"./chunk-7GC3BAAQ.js";import{b as $,c as H,d as b,f as Q}from"./chunk-TFOK2HCO.js";import{I as z,J as O,K as B}from"./chunk-DPOEUPYJ.js";import{Ab as S,Bb as F,Fb as k,Gb as A,Hb as C,Ib as p,Ra as c,Rb as T,Tb as n,Ub as u,W as x,Wb as E,Y as M,Zb as j,_ as g,ac as s,dc as L,eb as m,fb as _,gb as f,pa as D,rb as v,sb as h,ub as w,vb as I,wb as l,xb as d,yb as i,zb as P}from"./chunk-U2MXLZLO.js";var dt=["*"];var nt=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],ct=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],ot=new M("MAT_CARD_CONFIG"),W=(()=>{class t{appearance;constructor(){let a=g(ot,{optional:!0});this.appearance=a?.appearance||"raised"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(e,o){e&2&&T("mat-mdc-card-outlined",o.appearance==="outlined")("mdc-card--outlined",o.appearance==="outlined")("mat-mdc-card-filled",o.appearance==="filled")("mdc-card--filled",o.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:dt,decls:1,vars:0,template:function(e,o){e&1&&(C(),p(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return t})(),Y=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=f({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var Z=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=f({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})(),tt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=f({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return t})();var et=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:ct,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(e,o){e&1&&(C(nt),p(0),S(1,"div",0),p(2,1),F(),p(3,2))},encapsulation:2,changeDetection:0})}return t})();var at=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=_({type:t});static \u0275inj=x({imports:[z]})}return t})();var lt=t=>["/product",t];function pt(t,r){t&1&&(d(0,"div",1)(1,"span",2),n(2,"Best deal:"),i(),d(3,"span",5),n(4),i()()),t&2&&(c(4),u(r))}var y=class t{product=L.required();cheapestFull=s(()=>{let r=$(this.product());return r?`${b(r.price.price)} @ ${r.brand}`:"No price"});cheapestDiscounted=s(()=>{let r=H(this.product());return r?`${b(r.price.price)} @ ${r.brand}`:null});supermarketCount=s(()=>this.product().supermarkets.length);static \u0275fac=function(a){return new(a||t)};static \u0275cmp=m({type:t,selectors:[["pw-product-card"]],inputs:{product:[1,"product"]},decls:15,vars:9,consts:[[1,"product-card",3,"routerLink"],[1,"price-row"],[1,"label"],[1,"price","full-price"],[1,"supermarket-count"],[1,"price","discounted-price"]],template:function(a,e){if(a&1&&(d(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),n(3),i(),d(4,"mat-card-subtitle"),n(5),i()(),d(6,"mat-card-content")(7,"div",1)(8,"span",2),n(9,"Best price:"),i(),d(10,"span",3),n(11),i()(),v(12,pt,5,1,"div",1),d(13,"div",4),n(14),i()()()),a&2){let o;l("routerLink",j(7,lt,e.product().barcode)),c(3),u(e.product().name),c(2),u(e.product().barcode),c(6),u(e.cheapestFull()),c(),h((o=e.cheapestDiscounted())?12:-1,o),c(2),E(" ",e.supermarketCount()," supermarket",e.supermarketCount()===1?"":"s"," ")}},dependencies:[N,at,W,Z,et,tt,Y],styles:[".product-card[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:8px}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:4px 0}.label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--mat-sys-on-surface-variant)}.full-price[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-primary)}.discounted-price[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-error)}.supermarket-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--mat-sys-on-surface-variant);margin-top:8px}"]})};var ut=(t,r)=>r.barcode;function gt(t,r){t&1&&(d(0,"div",4)(1,"mat-icon"),n(2,"inventory_2"),i(),d(3,"p"),n(4,"No products yet. Start scanning!"),i()())}function ft(t,r){if(t&1&&P(0,"pw-product-card",6),t&2){let a=r.$implicit;l("product",a)}}function vt(t,r){if(t&1&&(d(0,"div",5),w(1,ft,1,1,"pw-product-card",6,ut),i()),t&2){let a=A();c(),I(a.filteredProducts())}}var rt=class t{storage=g(Q);searchQuery=D("");filteredProducts=s(()=>{let r=this.searchQuery().toLowerCase(),a=this.storage.products();return r?a.filter(e=>e.name.toLowerCase().includes(r)||e.barcode.includes(r)):a});static \u0275fac=function(a){return new(a||t)};static \u0275cmp=m({type:t,selectors:[["pw-products-list"]],decls:9,vars:2,consts:[[1,"list-page","page-content"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Name or barcode...",3,"input","value"],[1,"empty-state"],[1,"products-grid"],[3,"product"]],template:function(a,e){a&1&&(d(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),n(3,"Search products"),i(),d(4,"mat-icon",2),n(5,"search"),i(),d(6,"input",3),k("input",function(it){return e.searchQuery.set(it.target.value)}),i()(),v(7,gt,5,0,"div",4)(8,vt,3,0,"div",5),i()),a&2&&(c(6),l("value",e.searchQuery()),c(),h(e.filteredProducts().length===0?7:8))},dependencies:[R,q,X,G,V,K,J,B,O,y],styles:[".list-page[_ngcontent-%COMP%]{max-width:500px;margin:0 auto}.search-field[_ngcontent-%COMP%]{width:100%}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:48px 16px;color:var(--mat-sys-on-surface-variant)}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.products-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}"]})};export{rt as ProductsList};
